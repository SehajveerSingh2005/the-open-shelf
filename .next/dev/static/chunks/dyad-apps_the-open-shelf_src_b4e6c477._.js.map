{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ui/tabs.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Tabs = TabsPrimitive.Root;\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsList.displayName = TabsPrimitive.List.displayName;\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsContent.displayName = TabsPrimitive.Content.displayName;\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,OAAO,mUAAkB;AAE/B,MAAM,yBAAW,kVAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,mUAAkB;QACjB,KAAK;QACL,WAAW,IAAA,oKAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,mUAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,kVAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,sUAAqB;QACpB,KAAK;QACL,WAAW,IAAA,oKAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,sUAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,kVAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,sUAAqB;QACpB,KAAK;QACL,WAAW,IAAA,oKAAE,EACX,mIACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,sUAAqB,CAAC,WAAW"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ArticleCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, memo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Article } from '@/types/article';\nimport { cn } from '@/lib/utils';\n\nconst LOADED_IMAGES = new Set<string>();\n\ninterface ArticleCardProps {\n  article: Article;\n  onClick: (article: Article) => void;\n  isCanvas?: boolean;\n}\n\nconst ArticleCard = memo(({ article, onClick, isCanvas = false }: ArticleCardProps) => {\n  const imageUrl = article.imageUrl ? `${article.imageUrl}${article.imageUrl.includes('?') ? '&' : '?'}w=600&auto=format&q=75` : null;\n  const [imageLoaded, setImageLoaded] = useState(() => imageUrl ? LOADED_IMAGES.has(imageUrl) : false);\n\n  const handleLoad = () => {\n    if (imageUrl) {\n      LOADED_IMAGES.add(imageUrl);\n      setImageLoaded(true);\n    }\n  };\n\n  return (\n    <motion.div\n      whileHover={{ y: -4 }}\n      className={cn(\n        \"bg-white border border-gray-200/60 rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:shadow-[0_12px_40px_rgb(0,0,0,0.08)] transition-all cursor-pointer group overflow-hidden\",\n        isCanvas ? 'w-[320px]' : 'w-full mb-6'\n      )}\n      onClick={() => onClick(article)}\n    >\n      {imageUrl && (\n        <div className=\"w-full h-44 overflow-hidden bg-gray-50 relative\">\n          <div className={cn(\n            \"absolute inset-0 bg-gray-100 transition-opacity duration-300\",\n            imageLoaded ? \"opacity-0\" : \"opacity-100\"\n          )} />\n          <motion.img \n            initial={false}\n            animate={{ opacity: imageLoaded ? 1 : 0 }}\n            transition={{ duration: 0.2 }}\n            src={imageUrl} \n            alt={article.title}\n            onLoad={handleLoad}\n            className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105\"\n            loading=\"lazy\"\n            onError={(e) => (e.currentTarget.style.display = 'none')}\n          />\n        </div>\n      )}\n      <div className=\"p-6 space-y-4\">\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-[9px] uppercase tracking-[0.3em] text-gray-400 font-sans font-bold\">{article.source}</p>\n            <p className=\"text-[9px] text-gray-300 font-sans uppercase tracking-widest\">{article.readingTime}</p>\n          </div>\n          <h3 className=\"text-[17px] font-sans font-semibold leading-tight text-gray-900 line-clamp-2\">{article.title}</h3>\n        </div>\n        <p className=\"text-[13px] text-gray-500 line-clamp-3 font-serif italic leading-relaxed\">{article.excerpt}</p>\n        <div className=\"pt-3 border-t border-gray-50 flex items-center justify-between\">\n          <p className=\"text-[10px] text-gray-400 font-sans font-medium\">by {article.author}</p>\n          <span className=\"text-[9px] text-gray-300 font-sans\">{article.publishedAt}</span>\n        </div>\n      </div>\n    </motion.div>\n  );\n});\n\nArticleCard.displayName = 'ArticleCard';\n\nexport default ArticleCard;"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;;;AALA;;;;AAOA,MAAM,gBAAgB,IAAI;AAQ1B,MAAM,4BAAc,GAAA,IAAA,4UAAI,UAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,KAAK,EAAoB;;IAChF,MAAM,WAAW,QAAQ,QAAQ,GAAG,GAAG,QAAQ,QAAQ,GAAG,QAAQ,QAAQ,CAAC,QAAQ,CAAC,OAAO,MAAM,IAAI,sBAAsB,CAAC,GAAG;IAC/H,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ;gCAAC,IAAM,WAAW,cAAc,GAAG,CAAC,YAAY;;IAE9F,MAAM,aAAa;QACjB,IAAI,UAAU;YACZ,cAAc,GAAG,CAAC;YAClB,eAAe;QACjB;IACF;IAEA,qBACE,oWAAC,qVAAM,CAAC,GAAG;QACT,YAAY;YAAE,GAAG,CAAC;QAAE;QACpB,WAAW,IAAA,oKAAE,EACX,qLACA,WAAW,cAAc;QAE3B,SAAS,IAAM,QAAQ;;YAEtB,0BACC,oWAAC;gBAAI,WAAU;;kCACb,oWAAC;wBAAI,WAAW,IAAA,oKAAE,EAChB,gEACA,cAAc,cAAc;;;;;;kCAE9B,oWAAC,qVAAM,CAAC,GAAG;wBACT,SAAS;wBACT,SAAS;4BAAE,SAAS,cAAc,IAAI;wBAAE;wBACxC,YAAY;4BAAE,UAAU;wBAAI;wBAC5B,KAAK;wBACL,KAAK,QAAQ,KAAK;wBAClB,QAAQ;wBACR,WAAU;wBACV,SAAQ;wBACR,SAAS,CAAC,IAAO,EAAE,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG;;;;;;;;;;;;0BAIvD,oWAAC;gBAAI,WAAU;;kCACb,oWAAC;wBAAI,WAAU;;0CACb,oWAAC;gCAAI,WAAU;;kDACb,oWAAC;wCAAE,WAAU;kDAA2E,QAAQ,MAAM;;;;;;kDACtG,oWAAC;wCAAE,WAAU;kDAAgE,QAAQ,WAAW;;;;;;;;;;;;0CAElG,oWAAC;gCAAG,WAAU;0CAAgF,QAAQ,KAAK;;;;;;;;;;;;kCAE7G,oWAAC;wBAAE,WAAU;kCAA4E,QAAQ,OAAO;;;;;;kCACxG,oWAAC;wBAAI,WAAU;;0CACb,oWAAC;gCAAE,WAAU;;oCAAkD;oCAAI,QAAQ,MAAM;;;;;;;0CACjF,oWAAC;gCAAK,WAAU;0CAAsC,QAAQ,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAKnF;;AAEA,YAAY,WAAW,GAAG;uCAEX"}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/CanvasView.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport { motion, useMotionValue, useSpring, useTransform } from 'framer-motion';\nimport { Article } from '@/types/article';\nimport ArticleCard from './ArticleCard';\n\ninterface CanvasViewProps {\n  articles: {\n    items: Article[];\n    dimensions: { width: number; height: number };\n  };\n  onArticleClick: (article: Article) => void;\n}\n\nconst STORAGE_KEY = 'open-shelf-camera-v11';\n\nconst getStoredState = () => {\n  if (typeof window === 'undefined') return { x: 0, y: 0, scale: 0.8 };\n  try {\n    const saved = localStorage.getItem(STORAGE_KEY);\n    return saved ? JSON.parse(saved) : { x: 0, y: 0, scale: 0.8 };\n  } catch {\n    return { x: 0, y: 0, scale: 0.8 };\n  }\n};\n\nconst CanvasView = ({ articles, onArticleClick }: CanvasViewProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  \n  // Initialize with stored state to avoid flicker\n  const [initialState] = useState(() => getStoredState());\n  \n  const rawX = useMotionValue(initialState.x);\n  const rawY = useMotionValue(initialState.y);\n  const rawScale = useMotionValue(initialState.scale);\n\n  const x = useSpring(rawX, { damping: 45, stiffness: 350, mass: 0.6 });\n  const y = useSpring(rawY, { damping: 45, stiffness: 350, mass: 0.6 });\n  const scale = useSpring(rawScale, { damping: 30, stiffness: 300 });\n  \n  const [visibleItems, setVisibleItems] = useState<{ article: Article; offset: { x: number; y: number }; key: string }[]>([]);\n  const lastUpdatePos = useRef({ x: -9999, y: -9999, scale: -1 });\n\n  const isDragging = useRef(false);\n  const lastMousePos = useRef({ x: 0, y: 0 });\n  const dragDistance = useRef(0);\n\n  const updateVisibility = useCallback((force = false) => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const s = rawScale.get();\n    const curX = rawX.get();\n    const curY = rawY.get();\n    const { width, height } = articles.dimensions;\n    if (width === 0 || height === 0) return;\n\n    const dist = Math.sqrt(Math.pow(curX - lastUpdatePos.current.x, 2) + Math.pow(curY - lastUpdatePos.current.y, 2));\n    const scaleDiff = Math.abs(s - lastUpdatePos.current.scale);\n    \n    if (!force && dist < 300 && scaleDiff < 0.05) return;\n\n    lastUpdatePos.current = { x: curX, y: curY, scale: s };\n    \n    const margin = 1200; \n    const worldViewLeft = (-curX - container.offsetWidth / 2) / s - margin;\n    const worldViewRight = (-curX + container.offsetWidth / 2) / s + margin;\n    const worldViewTop = (-curY - container.offsetHeight / 2) / s - margin;\n    const worldViewBottom = (-curY + container.offsetHeight / 2) / s + margin;\n\n    const blockX = Math.floor(-curX / width);\n    const blockY = Math.floor(-curY / height);\n\n    const nextVisible: { article: Article; offset: { x: number; y: number }; key: string }[] = [];\n\n    for (let bx = blockX - 2; bx <= blockX + 2; bx++) {\n      for (let by = blockY - 2; by <= blockY + 2; by++) {\n        const offsetX = bx * width;\n        const offsetY = by * height;\n        \n        const seed = Math.abs((bx * 31 + by * 17) % articles.items.length);\n        \n        for (let i = 0; i < articles.items.length; i++) {\n          const index = (i + seed) % articles.items.length;\n          const art = articles.items[index];\n          \n          const absX = art.x + offsetX;\n          const absY = art.y + offsetY;\n          \n          if (absX >= worldViewLeft && absX <= worldViewRight &&\n              absY >= worldViewTop && absY <= worldViewBottom) {\n            nextVisible.push({ \n              article: art, \n              offset: { x: offsetX, y: offsetY },\n              key: `${art.id}-${bx}-${by}`\n            });\n          }\n        }\n      }\n    }\n    \n    setVisibleItems(nextVisible);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify({ x: curX, y: curY, scale: s }));\n  }, [articles, rawScale, rawX, rawY]);\n\n  useEffect(() => {\n    const unsubX = rawX.on('change', () => updateVisibility());\n    const unsubY = rawY.on('change', () => updateVisibility());\n    const unsubScale = rawScale.on('change', () => updateVisibility());\n    updateVisibility(true);\n    return () => { unsubX(); unsubY(); unsubScale(); };\n  }, [rawX, rawY, rawScale, updateVisibility]);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n    \n    const handleWheel = (e: WheelEvent) => {\n      if (e.ctrlKey || e.metaKey) {\n        e.preventDefault();\n        const rect = container.getBoundingClientRect();\n        const s = rawScale.get();\n        const zoomFactor = e.deltaY > 0 ? 0.94 : 1.06;\n        const newScale = Math.min(Math.max(s * zoomFactor, 0.3), 1.2);\n        \n        if (newScale !== s) {\n          const focalX = e.clientX - rect.left - rect.width / 2;\n          const focalY = e.clientY - rect.top - rect.height / 2;\n          const worldX = (focalX - rawX.get()) / s;\n          const worldY = (focalY - rawY.get()) / s;\n          rawX.set(focalX - worldX * newScale);\n          rawY.set(focalY - worldY * newScale);\n          rawScale.set(newScale);\n        }\n      } else {\n        rawX.set(rawX.get() - e.deltaX);\n        rawY.set(rawY.get() - e.deltaY);\n      }\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      if (e.button !== 0) return;\n      isDragging.current = true;\n      lastMousePos.current = { x: e.clientX, y: e.clientY };\n      dragDistance.current = 0;\n    };\n\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isDragging.current) return;\n      const dx = e.clientX - lastMousePos.current.x;\n      const dy = e.clientY - lastMousePos.current.y;\n      dragDistance.current += Math.sqrt(dx * dx + dy * dy);\n      rawX.set(rawX.get() + dx);\n      rawY.set(rawY.get() + dy);\n      lastMousePos.current = { x: e.clientX, y: e.clientY };\n    };\n\n    const handleMouseUp = () => { isDragging.current = false; };\n\n    container.addEventListener('wheel', handleWheel, { passive: false });\n    window.addEventListener('mousedown', handleMouseDown);\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n    \n    return () => {\n      container.removeEventListener('wheel', handleWheel);\n      window.removeEventListener('mousedown', handleMouseDown);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [rawX, rawY, rawScale]);\n\n  return (\n    <div \n      ref={containerRef}\n      className=\"w-full h-full relative overflow-hidden bg-background touch-none cursor-grab active:cursor-grabbing select-none\"\n    >\n      <motion.div \n        className=\"absolute inset-0 pointer-events-none opacity-[0.03]\"\n        style={{\n          backgroundImage: `linear-gradient(to right, #000 1px, transparent 1px), linear-gradient(to bottom, #000 1px, transparent 1px)`,\n          backgroundSize: '40px 40px',\n          backgroundPosition: useTransform([x, y], ([bx, by]) => `calc(50% + ${bx}px) calc(50% + ${by}px)`)\n        }}\n      />\n\n      <motion.div\n        style={{ x, y, scale }}\n        className=\"absolute left-1/2 top-1/2 pointer-events-none\"\n      >\n        {visibleItems.map(({ article, offset, key }) => (\n          <div \n            key={key} \n            className=\"absolute pointer-events-auto\"\n            style={{ \n              left: article.x + offset.x, \n              top: article.y + offset.y, \n              transform: 'translateX(-50%)',\n              willChange: 'transform'\n            }}\n          >\n            <ArticleCard \n              article={article} \n              onClick={(a) => dragDistance.current < 10 && onArticleClick(a)} \n              isCanvas \n            />\n          </div>\n        ))}\n      </motion.div>\n    </div>\n  );\n};\n\nexport default CanvasView;"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;;;AALA;;;;AAeA,MAAM,cAAc;AAEpB,MAAM,iBAAiB;IACrB;;IACA,IAAI;QACF,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,OAAO,QAAQ,KAAK,KAAK,CAAC,SAAS;YAAE,GAAG;YAAG,GAAG;YAAG,OAAO;QAAI;IAC9D,EAAE,OAAM;QACN,OAAO;YAAE,GAAG;YAAG,GAAG;YAAG,OAAO;QAAI;IAClC;AACF;AAEA,MAAM,aAAa,CAAC,EAAE,QAAQ,EAAE,cAAc,EAAmB;;IAC/D,MAAM,eAAe,IAAA,8UAAM,EAAiB;IAE5C,gDAAgD;IAChD,MAAM,CAAC,aAAa,GAAG,IAAA,gVAAQ;+BAAC,IAAM;;IAEtC,MAAM,OAAO,IAAA,qVAAc,EAAC,aAAa,CAAC;IAC1C,MAAM,OAAO,IAAA,qVAAc,EAAC,aAAa,CAAC;IAC1C,MAAM,WAAW,IAAA,qVAAc,EAAC,aAAa,KAAK;IAElD,MAAM,IAAI,IAAA,uUAAS,EAAC,MAAM;QAAE,SAAS;QAAI,WAAW;QAAK,MAAM;IAAI;IACnE,MAAM,IAAI,IAAA,uUAAS,EAAC,MAAM;QAAE,SAAS;QAAI,WAAW;QAAK,MAAM;IAAI;IACnE,MAAM,QAAQ,IAAA,uUAAS,EAAC,UAAU;QAAE,SAAS;QAAI,WAAW;IAAI;IAEhE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAwE,EAAE;IAC1H,MAAM,gBAAgB,IAAA,8UAAM,EAAC;QAAE,GAAG,CAAC;QAAM,GAAG,CAAC;QAAM,OAAO,CAAC;IAAE;IAE7D,MAAM,aAAa,IAAA,8UAAM,EAAC;IAC1B,MAAM,eAAe,IAAA,8UAAM,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE;IACzC,MAAM,eAAe,IAAA,8UAAM,EAAC;IAE5B,MAAM,mBAAmB,IAAA,mVAAW;oDAAC,CAAC,QAAQ,KAAK;YACjD,MAAM,YAAY,aAAa,OAAO;YACtC,IAAI,CAAC,WAAW;YAEhB,MAAM,IAAI,SAAS,GAAG;YACtB,MAAM,OAAO,KAAK,GAAG;YACrB,MAAM,OAAO,KAAK,GAAG;YACrB,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,SAAS,UAAU;YAC7C,IAAI,UAAU,KAAK,WAAW,GAAG;YAEjC,MAAM,OAAO,KAAK,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,cAAc,OAAO,CAAC,CAAC,EAAE,KAAK,KAAK,GAAG,CAAC,OAAO,cAAc,OAAO,CAAC,CAAC,EAAE;YAC9G,MAAM,YAAY,KAAK,GAAG,CAAC,IAAI,cAAc,OAAO,CAAC,KAAK;YAE1D,IAAI,CAAC,SAAS,OAAO,OAAO,YAAY,MAAM;YAE9C,cAAc,OAAO,GAAG;gBAAE,GAAG;gBAAM,GAAG;gBAAM,OAAO;YAAE;YAErD,MAAM,SAAS;YACf,MAAM,gBAAgB,CAAC,CAAC,OAAO,UAAU,WAAW,GAAG,CAAC,IAAI,IAAI;YAChE,MAAM,iBAAiB,CAAC,CAAC,OAAO,UAAU,WAAW,GAAG,CAAC,IAAI,IAAI;YACjE,MAAM,eAAe,CAAC,CAAC,OAAO,UAAU,YAAY,GAAG,CAAC,IAAI,IAAI;YAChE,MAAM,kBAAkB,CAAC,CAAC,OAAO,UAAU,YAAY,GAAG,CAAC,IAAI,IAAI;YAEnE,MAAM,SAAS,KAAK,KAAK,CAAC,CAAC,OAAO;YAClC,MAAM,SAAS,KAAK,KAAK,CAAC,CAAC,OAAO;YAElC,MAAM,cAAqF,EAAE;YAE7F,IAAK,IAAI,KAAK,SAAS,GAAG,MAAM,SAAS,GAAG,KAAM;gBAChD,IAAK,IAAI,KAAK,SAAS,GAAG,MAAM,SAAS,GAAG,KAAM;oBAChD,MAAM,UAAU,KAAK;oBACrB,MAAM,UAAU,KAAK;oBAErB,MAAM,OAAO,KAAK,GAAG,CAAC,CAAC,KAAK,KAAK,KAAK,EAAE,IAAI,SAAS,KAAK,CAAC,MAAM;oBAEjE,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,KAAK,CAAC,MAAM,EAAE,IAAK;wBAC9C,MAAM,QAAQ,CAAC,IAAI,IAAI,IAAI,SAAS,KAAK,CAAC,MAAM;wBAChD,MAAM,MAAM,SAAS,KAAK,CAAC,MAAM;wBAEjC,MAAM,OAAO,IAAI,CAAC,GAAG;wBACrB,MAAM,OAAO,IAAI,CAAC,GAAG;wBAErB,IAAI,QAAQ,iBAAiB,QAAQ,kBACjC,QAAQ,gBAAgB,QAAQ,iBAAiB;4BACnD,YAAY,IAAI,CAAC;gCACf,SAAS;gCACT,QAAQ;oCAAE,GAAG;oCAAS,GAAG;gCAAQ;gCACjC,KAAK,GAAG,IAAI,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI;4BAC9B;wBACF;oBACF;gBACF;YACF;YAEA,gBAAgB;YAChB,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;gBAAE,GAAG;gBAAM,GAAG;gBAAM,OAAO;YAAE;QAChF;mDAAG;QAAC;QAAU;QAAU;QAAM;KAAK;IAEnC,IAAA,iVAAS;gCAAC;YACR,MAAM,SAAS,KAAK,EAAE,CAAC;+CAAU,IAAM;;YACvC,MAAM,SAAS,KAAK,EAAE,CAAC;+CAAU,IAAM;;YACvC,MAAM,aAAa,SAAS,EAAE,CAAC;mDAAU,IAAM;;YAC/C,iBAAiB;YACjB;wCAAO;oBAAQ;oBAAU;oBAAU;gBAAc;;QACnD;+BAAG;QAAC;QAAM;QAAM;QAAU;KAAiB;IAE3C,IAAA,iVAAS;gCAAC;YACR,MAAM,YAAY,aAAa,OAAO;YACtC,IAAI,CAAC,WAAW;YAEhB,MAAM;oDAAc,CAAC;oBACnB,IAAI,EAAE,OAAO,IAAI,EAAE,OAAO,EAAE;wBAC1B,EAAE,cAAc;wBAChB,MAAM,OAAO,UAAU,qBAAqB;wBAC5C,MAAM,IAAI,SAAS,GAAG;wBACtB,MAAM,aAAa,EAAE,MAAM,GAAG,IAAI,OAAO;wBACzC,MAAM,WAAW,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,IAAI,YAAY,MAAM;wBAEzD,IAAI,aAAa,GAAG;4BAClB,MAAM,SAAS,EAAE,OAAO,GAAG,KAAK,IAAI,GAAG,KAAK,KAAK,GAAG;4BACpD,MAAM,SAAS,EAAE,OAAO,GAAG,KAAK,GAAG,GAAG,KAAK,MAAM,GAAG;4BACpD,MAAM,SAAS,CAAC,SAAS,KAAK,GAAG,EAAE,IAAI;4BACvC,MAAM,SAAS,CAAC,SAAS,KAAK,GAAG,EAAE,IAAI;4BACvC,KAAK,GAAG,CAAC,SAAS,SAAS;4BAC3B,KAAK,GAAG,CAAC,SAAS,SAAS;4BAC3B,SAAS,GAAG,CAAC;wBACf;oBACF,OAAO;wBACL,KAAK,GAAG,CAAC,KAAK,GAAG,KAAK,EAAE,MAAM;wBAC9B,KAAK,GAAG,CAAC,KAAK,GAAG,KAAK,EAAE,MAAM;oBAChC;gBACF;;YAEA,MAAM;wDAAkB,CAAC;oBACvB,IAAI,EAAE,MAAM,KAAK,GAAG;oBACpB,WAAW,OAAO,GAAG;oBACrB,aAAa,OAAO,GAAG;wBAAE,GAAG,EAAE,OAAO;wBAAE,GAAG,EAAE,OAAO;oBAAC;oBACpD,aAAa,OAAO,GAAG;gBACzB;;YAEA,MAAM;wDAAkB,CAAC;oBACvB,IAAI,CAAC,WAAW,OAAO,EAAE;oBACzB,MAAM,KAAK,EAAE,OAAO,GAAG,aAAa,OAAO,CAAC,CAAC;oBAC7C,MAAM,KAAK,EAAE,OAAO,GAAG,aAAa,OAAO,CAAC,CAAC;oBAC7C,aAAa,OAAO,IAAI,KAAK,IAAI,CAAC,KAAK,KAAK,KAAK;oBACjD,KAAK,GAAG,CAAC,KAAK,GAAG,KAAK;oBACtB,KAAK,GAAG,CAAC,KAAK,GAAG,KAAK;oBACtB,aAAa,OAAO,GAAG;wBAAE,GAAG,EAAE,OAAO;wBAAE,GAAG,EAAE,OAAO;oBAAC;gBACtD;;YAEA,MAAM;sDAAgB;oBAAQ,WAAW,OAAO,GAAG;gBAAO;;YAE1D,UAAU,gBAAgB,CAAC,SAAS,aAAa;gBAAE,SAAS;YAAM;YAClE,OAAO,gBAAgB,CAAC,aAAa;YACrC,OAAO,gBAAgB,CAAC,aAAa;YACrC,OAAO,gBAAgB,CAAC,WAAW;YAEnC;wCAAO;oBACL,UAAU,mBAAmB,CAAC,SAAS;oBACvC,OAAO,mBAAmB,CAAC,aAAa;oBACxC,OAAO,mBAAmB,CAAC,aAAa;oBACxC,OAAO,mBAAmB,CAAC,WAAW;gBACxC;;QACF;+BAAG;QAAC;QAAM;QAAM;KAAS;IAEzB,qBACE,oWAAC;QACC,KAAK;QACL,WAAU;;0BAEV,oWAAC,qVAAM,CAAC,GAAG;gBACT,WAAU;gBACV,OAAO;oBACL,iBAAiB,CAAC,2GAA2G,CAAC;oBAC9H,gBAAgB;oBAChB,oBAAoB,IAAA,6UAAY,EAAC;wBAAC;wBAAG;qBAAE;mDAAE,CAAC,CAAC,IAAI,GAAG,GAAK,CAAC,WAAW,EAAE,GAAG,eAAe,EAAE,GAAG,GAAG,CAAC;;gBAClG;;;;;;0BAGF,oWAAC,qVAAM,CAAC,GAAG;gBACT,OAAO;oBAAE;oBAAG;oBAAG;gBAAM;gBACrB,WAAU;0BAET,aAAa,GAAG,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,iBACzC,oWAAC;wBAEC,WAAU;wBACV,OAAO;4BACL,MAAM,QAAQ,CAAC,GAAG,OAAO,CAAC;4BAC1B,KAAK,QAAQ,CAAC,GAAG,OAAO,CAAC;4BACzB,WAAW;4BACX,YAAY;wBACd;kCAEA,cAAA,oWAAC,uLAAW;4BACV,SAAS;4BACT,SAAS,CAAC,IAAM,aAAa,OAAO,GAAG,MAAM,eAAe;4BAC5D,QAAQ;;;;;;uBAZL;;;;;;;;;;;;;;;;AAmBjB;GAzLM;;QAMS,qVAAc;QACd,qVAAc;QACV,qVAAc;QAErB,uUAAS;QACT,uUAAS;QACL,uUAAS;QAgJK,6UAAY;;;KA5JpC;uCA2LS"}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/FeedView.tsx"],"sourcesContent":["\"use client\";\n\nimport { Article } from '@/types/article';\nimport ArticleCard from './ArticleCard';\n\ninterface FeedViewProps {\n  articles: Article[];\n  onArticleClick: (article: Article) => void;\n}\n\nconst FeedView = ({ articles, onArticleClick }: FeedViewProps) => {\n  return (\n    <div className=\"w-full max-w-[2000px] mx-auto px-6 py-12\">\n      <div className=\"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 2xl:columns-5 gap-8 space-y-8\">\n        {articles.map(article => (\n          <div key={article.id} className=\"break-inside-avoid\">\n            <ArticleCard \n              article={article} \n              onClick={onArticleClick} \n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default FeedView;"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAUA,MAAM,WAAW,CAAC,EAAE,QAAQ,EAAE,cAAc,EAAiB;IAC3D,qBACE,oWAAC;QAAI,WAAU;kBACb,cAAA,oWAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAA,wBACZ,oWAAC;oBAAqB,WAAU;8BAC9B,cAAA,oWAAC,uLAAW;wBACV,SAAS;wBACT,SAAS;;;;;;mBAHH,QAAQ,EAAE;;;;;;;;;;;;;;;AAU9B;KAfM;uCAiBS"}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,6RAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,kVAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wVAAI,GAAG;IAC9B,qBACE,oWAAC;QACC,WAAW,IAAA,oKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 685, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ui/popover.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Popover = PopoverPrimitive.Root;\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger;\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n));\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName;\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent };\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,UAAU,gUAAqB;AAErC,MAAM,iBAAiB,mUAAwB;AAE/C,MAAM,+BAAiB,kVAAgB,MAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,oWAAC,kUAAuB;kBACtB,cAAA,oWAAC,mUAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,oKAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,mUAAwB,CAAC,WAAW"}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ui/slider.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as SliderPrimitive from \"@radix-ui/react-slider\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Slider = React.forwardRef<\r\n  React.ElementRef<typeof SliderPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SliderPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full touch-none select-none items-center\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\r\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\r\n    </SliderPrimitive.Track>\r\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\r\n  </SliderPrimitive.Root>\r\n));\r\nSlider.displayName = SliderPrimitive.Root.displayName;\r\n\r\nexport { Slider };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,uBAAS,kVAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,kUAAoB;QACnB,KAAK;QACL,WAAW,IAAA,oKAAE,EACX,4DACA;QAED,GAAG,KAAK;;0BAET,oWAAC,mUAAqB;gBAAC,WAAU;0BAC/B,cAAA,oWAAC,mUAAqB;oBAAC,WAAU;;;;;;;;;;;0BAEnC,oWAAC,mUAAqB;gBAAC,WAAU;;;;;;;;;;;;;AAGrC,OAAO,WAAW,GAAG,kUAAoB,CAAC,WAAW"}},
    {"offset": {"line": 790, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ReaderView.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence, useScroll, useSpring } from 'framer-motion';\nimport { X, ExternalLink, Type, Moon, Sun } from 'lucide-react';\nimport { Article } from '@/types/article';\nimport { Button } from '@/components/ui/button';\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ReaderViewProps {\n  article: Article | null;\n  onClose: () => void;\n}\n\ntype FontType = 'serif' | 'sans' | 'mono';\n\nconst STORAGE_KEY = 'open-shelf-reader-settings';\n\nconst ReaderContent = ({ article, onClose }: { article: Article, onClose: () => void }) => {\n  // Persistence logic\n  const [settings, setSettings] = useState(() => {\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      return saved ? JSON.parse(saved) : {\n        fontSize: 20,\n        lineHeight: 1.75,\n        fontType: 'sans' as FontType,\n        theme: 'light' as 'light' | 'dark'\n      };\n    } catch {\n      return { fontSize: 20, lineHeight: 1.75, fontType: 'sans' as FontType, theme: 'light' as 'light' | 'dark' };\n    }\n  });\n\n  const updateSetting = (key: string, value: any) => {\n    const newSettings = { ...settings, [key]: value };\n    setSettings(newSettings);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(newSettings));\n  };\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { scrollYProgress } = useScroll({ container: containerRef });\n  const scaleX = useSpring(scrollYProgress, { stiffness: 100, damping: 30, restDelta: 0.001 });\n\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n    return () => { document.body.style.overflow = 'unset'; };\n  }, []);\n\n  return (\n    <motion.div\n      ref={containerRef}\n      initial={{ y: '100vh' }}\n      animate={{ y: 0 }}\n      exit={{ y: '100vh' }}\n      transition={{ type: 'spring', damping: 30, stiffness: 300, mass: 0.8 }}\n      className={cn(\n        \"fixed inset-0 z-50 overflow-y-auto transition-colors duration-500\",\n        settings.theme === 'light' ? 'bg-[#fff] text-gray-900' : 'bg-[#0a0a0a] text-gray-100'\n      )}\n    >\n      {/* Editorial Header */}\n      <div className={cn(\n        \"fixed top-0 left-0 right-0 h-14 z-50 flex items-center justify-between px-6 transition-all duration-300\",\n        settings.theme === 'light' ? 'bg-white border-b border-gray-50' : 'bg-[#0a0a0a] border-b border-gray-900'\n      )}>\n        <motion.div className=\"absolute bottom-0 left-0 right-0 h-[1.5px] bg-gray-900 dark:bg-gray-100 origin-left\" style={{ scaleX }} />\n        <div className=\"flex items-center space-x-3 overflow-hidden\">\n          <span className={cn(\"text-[9px] uppercase tracking-[0.3em] font-sans font-semibold whitespace-nowrap\", settings.theme === 'light' ? 'text-gray-400' : 'text-gray-600')}>{article.source}</span>\n          <span className=\"w-1 h-1 rounded-full bg-gray-300\" />\n          <p className={cn(\"text-[10px] uppercase tracking-wider truncate font-sans font-medium\", settings.theme === 'light' ? 'text-gray-500' : 'text-gray-400')}>{article.title}</p>\n        </div>\n        <div className=\"flex items-center space-x-1\">\n          <Popover>\n            <PopoverTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 text-gray-400 hover:text-gray-900 dark:hover:text-white\"><Type size={16} /></Button>\n            </PopoverTrigger>\n            <PopoverContent className=\"w-64 p-5 space-y-6 rounded-none border-gray-100\" align=\"end\">\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-[10px] uppercase tracking-widest font-semibold text-gray-400\">Appearance</span>\n                  <div className=\"flex border rounded-none p-0.5\">\n                    <button onClick={() => updateSetting('theme', 'light')} className={cn(\"p-1.5 transition-colors\", settings.theme === 'light' ? 'bg-gray-100' : '')}><Sun size={12} /></button>\n                    <button onClick={() => updateSetting('theme', 'dark')} className={cn(\"p-1.5 transition-colors\", settings.theme === 'dark' ? 'bg-gray-100' : '')}><Moon size={12} /></button>\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <span className=\"text-[10px] uppercase tracking-widest font-semibold text-gray-400\">Typeface</span>\n                  <div className=\"grid grid-cols-3 gap-1\">\n                    {['serif', 'sans', 'mono'].map((f) => (\n                      <Button key={f} variant={settings.fontType === f ? 'secondary' : 'outline'} size=\"sm\" className=\"rounded-none text-[10px] h-7 capitalize\" onClick={() => updateSetting('fontType', (f as FontType))} >{f}</Button>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-[10px] uppercase tracking-widest font-semibold text-gray-400\">Size</span>\n                    <span className=\"text-[10px] text-gray-500\">{settings.fontSize}px</span>\n                  </div>\n                  <Slider value={[settings.fontSize]} onValueChange={(v) => updateSetting('fontSize', v[0])} min={16} max={28} step={1} className=\"py-2\" />\n                </div>\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-[10px] uppercase tracking-widest font-semibold text-gray-400\">Line</span>\n                    <span className=\"text-[10px] text-gray-500\">{settings.lineHeight.toFixed(2)}</span>\n                  </div>\n                  <Slider value={[settings.lineHeight]} onValueChange={(v) => updateSetting('lineHeight', v[0])} min={1.4} max={2.2} step={0.05} className=\"py-2\" />\n                </div>\n              </div>\n            </PopoverContent>\n          </Popover>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"h-8 w-8 text-gray-400 hover:text-gray-900 dark:hover:text-white\"><X size={18} /></Button>\n        </div>\n      </div>\n\n      <motion.article \n        initial={{ y: 30, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ delay: 0.1, duration: 0.6, ease: [0.16, 1, 0.3, 1] }}\n        className=\"max-w-3xl mx-auto px-6 md:px-10 py-32\"\n      >\n        <header className=\"mb-24 space-y-10\">\n          <div className=\"space-y-6\">\n            <p className={cn(\"text-[10px] uppercase tracking-[0.5em] font-sans font-bold\", settings.theme === 'light' ? 'text-gray-400' : 'text-gray-600')}>{article.source} â€¢ {article.publishedAt}</p>\n            <h1 className={cn(\"text-5xl md:text-7xl font-serif font-medium leading-[1.0] tracking-tight\", settings.theme === 'light' ? 'text-gray-900' : 'text-gray-100')}>{article.title}</h1>\n            <div className={cn(\"flex items-center space-x-4 text-xl md:text-2xl font-serif italic border-t pt-8\", settings.theme === 'light' ? 'text-gray-400 border-gray-50' : 'text-gray-500 border-gray-900')}>\n              <span>by {article.author}</span>\n              <span className=\"w-1 h-1 rounded-full bg-current opacity-20\" />\n              <span>{article.readingTime}</span>\n            </div>\n          </div>\n        </header>\n\n        <div\n          className={cn(\n            \"prose prose-lg max-w-none transition-all duration-300 selection:bg-gray-100 selection:text-black\",\n            settings.fontType === 'serif' ? 'font-serif' : settings.fontType === 'mono' ? 'font-mono' : 'font-sans',\n            settings.theme === 'light' ? 'prose-gray' : 'prose-invert prose-gray',\n            \"[&_img]:mx-auto [&_img]:block [&_img]:rounded-none [&_img]:mt-16 [&_img]:mb-8 [&_img]:max-w-full\",\n            // Hide common RSS \"expand\" icons or meta buttons\n            \"[&_button]:hidden [&_a.expand]:hidden [&_div.expand]:hidden [&_.image-expand]:hidden\",\n            \"[&_p]:mb-8 [&_p]:leading-relaxed\",\n            \"[&_h2]:font-serif [&_h2]:text-3xl [&_h2]:mt-16 [&_h2]:mb-8\",\n            \"[&_blockquote]:border-l-[1px] [&_blockquote]:border-gray-200 [&_blockquote]:italic [&_blockquote]:text-2xl [&_blockquote]:font-serif [&_blockquote]:pl-10 [&_blockquote]:my-16\",\n            // Link styling: subtle underline and color change\n            \"prose-a:underline prose-a:underline-offset-4 prose-a:decoration-gray-200 hover:prose-a:decoration-gray-900 prose-a:text-gray-900 dark:prose-a:text-gray-100 transition-colors\"\n          )}\n          style={{ fontSize: `${settings.fontSize}px`, lineHeight: settings.lineHeight }}\n          dangerouslySetInnerHTML={{ __html: article.content }}\n        />\n        \n        <footer className=\"mt-40 pt-20 border-t border-gray-50 dark:border-gray-900 flex justify-center\">\n          <Button \n            variant=\"outline\" \n            asChild\n            className={cn(\"rounded-none px-10 h-14 text-[10px] uppercase tracking-[0.4em] transition-all\", settings.theme === 'light' ? 'border-gray-200 hover:bg-gray-900 hover:text-white' : 'border-gray-800 text-gray-500 hover:bg-white hover:text-black')}\n          >\n            <a href={article.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center space-x-3\">\n              <span>Read Original</span>\n              <ExternalLink size={12} />\n            </a>\n          </Button>\n        </footer>\n      </motion.article>\n    </motion.div>\n  );\n};\n\nconst ReaderView = ({ article, onClose }: ReaderViewProps) => {\n  return (\n    <AnimatePresence mode=\"wait\">\n      {article && <ReaderContent key={article.id} article={article} onClose={onClose} />}\n    </AnimatePresence>\n  );\n};\n\nexport default ReaderView;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1405, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ui/dialog.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\r\nimport { X } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Dialog = DialogPrimitive.Root;\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger;\r\n\r\nconst DialogPortal = DialogPrimitive.Portal;\r\n\r\nconst DialogClose = DialogPrimitive.Close;\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n));\r\nDialogContent.displayName = DialogPrimitive.Content.displayName;\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\nDialogHeader.displayName = \"DialogHeader\";\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n);\r\nDialogFooter.displayName = \"DialogFooter\";\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n));\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,SAAS,kUAAoB;AAEnC,MAAM,gBAAgB,qUAAuB;AAE7C,MAAM,eAAe,oUAAsB;AAE3C,MAAM,cAAc,mUAAqB;AAEzC,MAAM,8BAAgB,kVAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,qUAAuB;QACtB,KAAK;QACL,WAAW,IAAA,oKAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,qUAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,kVAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,oWAAC;;0BACC,oWAAC;;;;;0BACD,oWAAC,qUAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,oKAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,oWAAC,mUAAqB;wBAAC,WAAU;;0CAC/B,oWAAC,gUAAC;gCAAC,WAAU;;;;;;0CACb,oWAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,qUAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,oWAAC;QACC,WAAW,IAAA,oKAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,oWAAC;QACC,WAAW,IAAA,oKAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,kVAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,mUAAqB;QACpB,KAAK;QACL,WAAW,IAAA,oKAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,mUAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,kVAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,oWAAC,yUAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,oKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,yUAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1563, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className,\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,kVAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,oWAAC;QACC,MAAM;QACN,WAAW,IAAA,oKAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 1598, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/utils/toast.ts"],"sourcesContent":["import { toast } from \"sonner\";\r\n\r\nexport const showSuccess = (message: string) => {\r\n  toast.success(message);\r\n};\r\n\r\nexport const showError = (message: string) => {\r\n  toast.error(message);\r\n};\r\n\r\nexport const showLoading = (message: string) => {\r\n  return toast.loading(message);\r\n};\r\n\r\nexport const dismissToast = (toastId: string) => {\r\n  toast.dismiss(toastId);\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAM,cAAc,CAAC;IAC1B,4TAAK,CAAC,OAAO,CAAC;AAChB;AAEO,MAAM,YAAY,CAAC;IACxB,4TAAK,CAAC,KAAK,CAAC;AACd;AAEO,MAAM,cAAc,CAAC;IAC1B,OAAO,4TAAK,CAAC,OAAO,CAAC;AACvB;AAEO,MAAM,eAAe,CAAC;IAC3B,4TAAK,CAAC,OAAO,CAAC;AAChB"}},
    {"offset": {"line": 1629, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/components/FeedManager.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, FormEvent, ReactNode } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Loader2, Trash2, Plus, Settings2, Eye, EyeOff } from 'lucide-react';\nimport { showSuccess, showError } from '@/utils/toast';\n\ninterface Feed {\n  id: string;\n  url: string;\n  title: string;\n  is_hidden: boolean;\n}\n\ninterface FeedManagerProps {\n  onUpdate: () => void;\n  trigger?: ReactNode;\n}\n\nconst FeedManager = ({ onUpdate, trigger }: FeedManagerProps) => {\n  const [feeds, setFeeds] = useState<Feed[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [newUrl, setNewUrl] = useState('');\n  const [adding, setAdding] = useState(false);\n\n  const fetchFeeds = async (showLoading = true) => {\n    if (showLoading) setLoading(true);\n    const { data, error } = await supabase\n      .from('feeds')\n      .select('*')\n      .order('created_at', { ascending: false });\n    \n    if (!error && data) setFeeds(data);\n    if (showLoading) setLoading(false);\n  };\n\n  const handleAdd = async (e: FormEvent) => {\n    e.preventDefault();\n    if (!newUrl) return;\n    setAdding(true);\n    try {\n      const { error } = await supabase.functions.invoke('fetch-rss', {\n        body: { feedUrl: newUrl }\n      });\n      if (error) throw error;\n      showSuccess(\"Source added to shelf\");\n      setNewUrl('');\n      await fetchFeeds(false);\n      onUpdate();\n    } catch (err: any) {\n      showError(\"Could not connect to feed.\");\n    } finally {\n      setAdding(false);\n    }\n  };\n\n  const toggleVisibility = async (id: string, currentHidden: boolean) => {\n    // Optimistic UI update\n    setFeeds(prev => prev.map(f => f.id === id ? { ...f, is_hidden: !currentHidden } : f));\n\n    const { error } = await supabase\n      .from('feeds')\n      .update({ is_hidden: !currentHidden })\n      .eq('id', id);\n\n    if (error) {\n      showError(\"Could not update visibility.\");\n      // Rollback on error\n      fetchFeeds(false);\n    } else {\n      onUpdate();\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    // Optimistic UI update\n    const previousFeeds = [...feeds];\n    setFeeds(prev => prev.filter(f => f.id !== id));\n\n    const { error } = await supabase.from('feeds').delete().eq('id', id);\n    if (error) {\n      showError(\"Could not remove source.\");\n      setFeeds(previousFeeds);\n    } else {\n      showSuccess(\"Source removed\");\n      onUpdate();\n    }\n  };\n\n  useEffect(() => {\n    fetchFeeds();\n  }, []);\n\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        {trigger || (\n          <button className=\"flex items-center space-x-2 text-[10px] uppercase tracking-[0.2em] text-gray-400 hover:text-gray-900 transition-colors\">\n            <Settings2 size={14} />\n            <span>Manage Feeds</span>\n          </button>\n        )}\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-md rounded-none border-gray-100\">\n        <DialogHeader>\n          <DialogTitle className=\"font-serif text-3xl font-medium\">Your Library</DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-6 pt-6\">\n          <form onSubmit={handleAdd} className=\"flex items-stretch space-x-2\">\n            <Input \n              placeholder=\"https://example.com/feed\" \n              value={newUrl}\n              onChange={(e) => setNewUrl(e.target.value)}\n              className=\"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-11 flex-1 transition-colors\"\n            />\n            <Button type=\"submit\" disabled={adding} className=\"rounded-none bg-gray-900 hover:bg-black px-6 h-11\">\n              {adding ? <Loader2 className=\"animate-spin\" size={16} /> : <Plus size={16} />}\n            </Button>\n          </form>\n\n          <div className=\"max-h-[400px] overflow-y-auto space-y-3 pr-2 scrollbar-thin\">\n            {loading && feeds.length === 0 ? (\n              <div className=\"flex justify-center py-12\"><Loader2 className=\"animate-spin text-gray-200\" /></div>\n            ) : feeds.length === 0 ? (\n              <p className=\"text-center text-sm text-gray-400 font-serif italic py-8\">No sources yet.</p>\n            ) : (\n              feeds.map((feed) => (\n                <div key={feed.id} className={`flex items-center justify-between p-4 border transition-all duration-300 ${feed.is_hidden ? 'bg-gray-50/50 border-gray-100 opacity-60' : 'bg-white border-gray-100 hover:border-gray-300'}`}>\n                  <div className=\"overflow-hidden pr-4\">\n                    <p className={`font-serif font-medium truncate text-lg transition-all ${feed.is_hidden ? 'text-gray-400 line-through' : 'text-gray-900'}`}>{feed.title}</p>\n                    <p className=\"text-[9px] text-gray-400 truncate uppercase tracking-widest\">{feed.url}</p>\n                  </div>\n                  <div className=\"flex items-center space-x-1 shrink-0\">\n                    <Button \n                      variant=\"ghost\" \n                      size=\"icon\" \n                      onClick={() => toggleVisibility(feed.id, feed.is_hidden)}\n                      className=\"text-gray-300 hover:text-gray-900 transition-colors h-9 w-9\"\n                    >\n                      {feed.is_hidden ? <EyeOff size={16} /> : <Eye size={16} />}\n                    </Button>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"icon\" \n                      onClick={() => handleDelete(feed.id)}\n                      className=\"text-gray-300 hover:text-red-500 transition-colors h-9 w-9\"\n                    >\n                      <Trash2 size={16} />\n                    </Button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default FeedManager;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1964, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/hooks/useArticles.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Article } from '@/types/article';\n\nexport function useArticles() {\n  return useQuery({\n    queryKey: ['articles'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('articles')\n        .select(`\n          *,\n          feeds:feeds!articles_feed_id_fkey (\n            is_hidden\n          )\n        `)\n        .order('published_at', { ascending: false });\n\n      if (error) throw error;\n\n      const items = (data || []).filter(item => !item.feeds?.is_hidden);\n      \n      const COL_WIDTH = 380; \n      const GAP = 60; \n      const NUM_COLS = 5; // Wider base block\n      const BLOCK_WIDTH = NUM_COLS * COL_WIDTH;\n      \n      // Explicitly type as number[] to avoid strict inference of (0 | 40)[]\n      const colHeights: number[] = new Array(NUM_COLS).fill(0).map((_, i) => (i % 2 === 0 ? 0 : 40));\n\n      const positioned = items.map((item: any, idx: number) => {\n        const minHeight = Math.min(...colHeights);\n        const colIndex = colHeights.indexOf(minHeight);\n        \n        // Add random horizontal jitter to break the vertical lines\n        const jitterX = (Math.sin(idx * 1.5) * 30);\n        const x = (colIndex * COL_WIDTH) - (BLOCK_WIDTH / 2) + (COL_WIDTH / 2) + jitterX;\n        \n        // Vertical shift based on index to create more gaps\n        const y = colHeights[colIndex] + (Math.cos(idx * 0.8) * 20);\n        \n        const hasImage = !!item.image_url;\n        // Vary the heights more aggressively for a better masonry effect\n        const baseHeight = hasImage ? 380 : 260;\n        const variableHeight = (Math.abs(Math.sin(idx)) * 120);\n        const estimatedHeight = baseHeight + variableHeight;\n        \n        colHeights[colIndex] += estimatedHeight + GAP;\n\n        return {\n          id: item.id,\n          title: item.title,\n          author: item.author,\n          source: item.source,\n          readingTime: item.reading_time || '5 min read',\n          excerpt: item.excerpt,\n          content: item.content,\n          imageUrl: item.image_url,\n          publishedAt: item.published_at ? new Date(item.published_at).toLocaleDateString() : 'Recently',\n          url: item.url,\n          x: x,\n          y: y,\n        };\n      });\n\n      return {\n        items: positioned as Article[],\n        dimensions: { \n          width: BLOCK_WIDTH, \n          height: Math.max(...colHeights) \n        }\n      };\n    },\n    staleTime: 1000 * 60 * 5,\n    refetchOnWindowFocus: false,\n    retry: 1,\n  });\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAGO,SAAS;;IACd,OAAO,IAAA,kUAAQ,EAAC;QACd,UAAU;YAAC;SAAW;QACtB,OAAO;oCAAE;gBACP,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,gMAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;QAKT,CAAC,EACA,KAAK,CAAC,gBAAgB;oBAAE,WAAW;gBAAM;gBAE5C,IAAI,OAAO,MAAM;gBAEjB,MAAM,QAAQ,CAAC,QAAQ,EAAE,EAAE,MAAM;kDAAC,CAAA,OAAQ,CAAC,KAAK,KAAK,EAAE;;gBAEvD,MAAM,YAAY;gBAClB,MAAM,MAAM;gBACZ,MAAM,WAAW,GAAG,mBAAmB;gBACvC,MAAM,cAAc,WAAW;gBAE/B,sEAAsE;gBACtE,MAAM,aAAuB,IAAI,MAAM,UAAU,IAAI,CAAC,GAAG,GAAG;uDAAC,CAAC,GAAG,IAAO,IAAI,MAAM,IAAI,IAAI;;gBAE1F,MAAM,aAAa,MAAM,GAAG;uDAAC,CAAC,MAAW;wBACvC,MAAM,YAAY,KAAK,GAAG,IAAI;wBAC9B,MAAM,WAAW,WAAW,OAAO,CAAC;wBAEpC,2DAA2D;wBAC3D,MAAM,UAAW,KAAK,GAAG,CAAC,MAAM,OAAO;wBACvC,MAAM,IAAI,AAAC,WAAW,YAAc,cAAc,IAAM,YAAY,IAAK;wBAEzE,oDAAoD;wBACpD,MAAM,IAAI,UAAU,CAAC,SAAS,GAAI,KAAK,GAAG,CAAC,MAAM,OAAO;wBAExD,MAAM,WAAW,CAAC,CAAC,KAAK,SAAS;wBACjC,iEAAiE;wBACjE,MAAM,aAAa,WAAW,MAAM;wBACpC,MAAM,iBAAkB,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,QAAQ;wBAClD,MAAM,kBAAkB,aAAa;wBAErC,UAAU,CAAC,SAAS,IAAI,kBAAkB;wBAE1C,OAAO;4BACL,IAAI,KAAK,EAAE;4BACX,OAAO,KAAK,KAAK;4BACjB,QAAQ,KAAK,MAAM;4BACnB,QAAQ,KAAK,MAAM;4BACnB,aAAa,KAAK,YAAY,IAAI;4BAClC,SAAS,KAAK,OAAO;4BACrB,SAAS,KAAK,OAAO;4BACrB,UAAU,KAAK,SAAS;4BACxB,aAAa,KAAK,YAAY,GAAG,IAAI,KAAK,KAAK,YAAY,EAAE,kBAAkB,KAAK;4BACpF,KAAK,KAAK,GAAG;4BACb,GAAG;4BACH,GAAG;wBACL;oBACF;;gBAEA,OAAO;oBACL,OAAO;oBACP,YAAY;wBACV,OAAO;wBACP,QAAQ,KAAK,GAAG,IAAI;oBACtB;gBACF;YACF;;QACA,WAAW,OAAO,KAAK;QACvB,sBAAsB;QACtB,OAAO;IACT;AACF;GAzEgB;;QACP,kUAAQ"}},
    {"offset": {"line": 2058, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sehaj/dyad-apps/the-open-shelf/src/pages/Index.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo, useRef, Suspense } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport CanvasView from '@/components/CanvasView';\nimport FeedView from '@/components/FeedView';\nimport ReaderView from '@/components/ReaderView';\nimport FeedManager from '@/components/FeedManager';\nimport { Article } from '@/types/article';\nimport { useArticles } from '@/hooks/useArticles';\nimport { Loader2, RefreshCw, PlusCircle, User } from 'lucide-react';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuth } from '@/hooks/useAuth';\nimport { showSuccess, showError } from '@/utils/toast';\n\nconst ShelfContent = () => {\n  const { user } = useAuth();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  \n  const articleId = searchParams ? searchParams.get('article') : null;\n  \n  const [view, setView] = useState<'canvas' | 'feed'>('canvas');\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [onboardingChecked, setOnboardingChecked] = useState(false);\n  const hasAttemptedInitialSync = useRef(false);\n  \n  const { data: articlesData, isLoading, refetch } = useArticles();\n  \n  const articles: Article[] = articlesData?.items || [];\n\n  useEffect(() => {\n    const checkOnboarding = async () => {\n      if (!user) return;\n      \n      const { data: profileData } = await supabase\n        .from('profiles')\n        .select('onboarding_completed')\n        .eq('id', user.id)\n        .single();\n        \n      const onboardingCompleted = profileData?.onboarding_completed;\n\n      if (!onboardingCompleted) {\n        router.push('/onboarding');\n      } else {\n        setOnboardingChecked(true);\n      }\n    };\n    checkOnboarding();\n  }, [user, router]);\n\n  const selectedArticle = useMemo(() => {\n    if (articles.length === 0 || !articleId) return null;\n    return articles.find(a => a.id === articleId) || null;\n  }, [articles, articleId]);\n\n  const handleArticleClick = (article: Article) => {\n    router.push(`/shelf?article=${article.id}`, { scroll: false });\n  };\n\n  const handleCloseReader = () => {\n    router.push('/shelf', { scroll: false });\n  };\n\n  const syncFeeds = async (isAuto = false) => {\n    if (isSyncing || !user) return;\n    if (isAuto) hasAttemptedInitialSync.current = true;\n    \n    setIsSyncing(true);\n    try {\n      const { data: feeds } = await supabase\n        .from('feeds')\n        .select('url')\n        .eq('user_id', user.id);\n      \n      if (feeds && feeds.length > 0) {\n        const { data: { session } } = await supabase.auth.getSession();\n        const token = session?.access_token;\n\n        const promises = feeds.map(feed => \n          fetch('/api/sync', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({ feedUrl: feed.url })\n          })\n        );\n        \n        await Promise.all(promises);\n        if (!isAuto) showSuccess(\"Shelf updated\");\n        refetch();\n      }\n    } catch (err) {\n      if (!isAuto) showError(\"Connection lost.\");\n    } finally {\n      setIsSyncing(false);\n    }\n  };\n\n  useEffect(() => {\n    if (onboardingChecked && !isLoading && !hasAttemptedInitialSync.current && articles.length === 0) {\n      syncFeeds(true);\n    }\n  }, [isLoading, onboardingChecked, articles.length]);\n\n  if (!onboardingChecked || (isLoading && articles.length === 0 && !isSyncing)) {\n    return (\n      <div className=\"h-screen w-screen flex flex-col items-center justify-center bg-[#fafafa] space-y-4\">\n        <Loader2 className=\"animate-spin text-gray-200\" size={32} />\n        <p className=\"text-[10px] uppercase tracking-widest text-gray-400 font-sans\">Opening the shelf...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen w-screen bg-background flex flex-col overflow-hidden\">\n      <header className=\"fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-6 py-4 flex justify-between items-center\">\n        <div className=\"flex flex-col items-start cursor-pointer group\" onClick={() => router.push('/')}>\n          <span className=\"text-[9px] uppercase tracking-[0.4em] font-sans font-bold text-gray-400 group-hover:text-gray-900 transition-colors\">The</span>\n          <h1 className=\"text-xl font-serif font-medium tracking-tight text-gray-900\">\n            Open Shelf\n          </h1>\n        </div>\n        \n        <div className=\"flex items-center space-x-6\">\n          <FeedManager onUpdate={refetch} />\n\n          <button onClick={() => syncFeeds(false)} disabled={isSyncing} className=\"flex items-center space-x-2 text-[10px] uppercase tracking-[0.2em] text-gray-400 hover:text-gray-900 transition-colors\">\n            <RefreshCw className={isSyncing ? \"animate-spin\" : \"\"} size={14} />\n            <span>Sync</span>\n          </button>\n\n          <Tabs value={view} onValueChange={(v) => setView(v as 'canvas' | 'feed')}>\n            <TabsList className=\"bg-gray-100/50 rounded-none h-9\">\n              <TabsTrigger value=\"canvas\" className=\"text-[10px] uppercase tracking-widest px-4\">Canvas</TabsTrigger>\n              <TabsTrigger value=\"feed\" className=\"text-[10px] uppercase tracking-widest px-4\">Feed</TabsTrigger>\n            </TabsList>\n          </Tabs>\n\n          <button \n            onClick={() => router.push('/profile')} \n            className=\"p-2 text-gray-300 hover:text-gray-900 transition-colors\"\n            title=\"Profile & Stacks\"\n          >\n            <User size={16} />\n          </button>\n        </div>\n      </header>\n\n      <main className=\"flex-1 mt-[73px] relative overflow-hidden\">\n        {articles.length > 0 ? (\n          view === 'canvas' && articlesData ? (\n            <CanvasView articles={articlesData} onArticleClick={handleArticleClick} />\n          ) : (\n            <div className=\"h-full overflow-y-auto subtle-grid\">\n              <FeedView articles={articles} onArticleClick={handleArticleClick} />\n            </div>\n          )\n        ) : (\n          <div className=\"h-full flex flex-col items-center justify-center text-center px-6 space-y-6\">\n            <div className=\"space-y-2\">\n              <p className=\"text-gray-400 font-serif italic text-xl\">\n                {isSyncing ? \"Syncing your sources...\" : \"Your shelf is empty.\"}\n              </p>\n              <p className=\"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto\">\n                {isSyncing \n                  ? \"We're fetching the latest articles for you.\" \n                  : \"Add an RSS feed via 'Manage Feeds' to start your collection.\"}\n              </p>\n            </div>\n            {!isSyncing && (\n              <FeedManager onUpdate={refetch} trigger={\n                <button className=\"flex items-center space-x-2 px-8 py-4 border border-gray-100 hover:border-gray-900 transition-all text-[10px] uppercase tracking-[0.3em] font-bold\">\n                  <PlusCircle size={16} />\n                  <span>Add First Source</span>\n                </button>\n              } />\n            )}\n            {isSyncing && <Loader2 className=\"animate-spin text-gray-100\" size={24} />}\n          </div>\n        )}\n      </main>\n\n      <ReaderView \n        article={selectedArticle} \n        onClose={handleCloseReader} \n      />\n    </div>\n  );\n};\n\nexport default function Index() {\n  return (\n    <Suspense fallback={\n      <div className=\"h-screen w-screen flex flex-col items-center justify-center bg-[#fafafa]\">\n        <Loader2 className=\"animate-spin text-gray-200\" size={32} />\n      </div>\n    }>\n      <ShelfContent />\n    </Suspense>\n  );\n}"],"names":[],"mappings":"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"}}]
}
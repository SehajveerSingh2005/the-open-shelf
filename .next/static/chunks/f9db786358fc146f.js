(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58269,(e,s,t)=>{s.exports=e.r(12423)},65861,e=>{"use strict";var s=e.i(92059),t=e.i(79307),r=e.i(38604),a=e.i(25930),i=e.i(9854);let l=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),n=t.forwardRef(({className:e,variant:t,size:a,asChild:n=!1,...o},c)=>{let d=n?r.Slot:"button";return(0,s.jsx)(d,{className:(0,i.cn)(l({variant:t,size:a,className:e})),ref:c,...o})});n.displayName="Button",e.s(["Button",()=>n])},46416,24457,62125,e=>{"use strict";var s=e.i(92059),t=e.i(79307),r=e.i(9854);let a=t.forwardRef(({className:e,type:t,...a},i)=>(0,s.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...a}));a.displayName="Input",e.s(["Input",()=>a],46416);let i=(0,e.i(62670).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>i],24457);var l=e.i(75680);e.s(["showError",0,e=>{l.toast.error(e)},"showSuccess",0,e=>{l.toast.success(e)}],62125)},14052,e=>{"use strict";var s=e.i(92059),t=e.i(79307),r=e.i(58269),a=e.i(53379),i=e.i(11872),l=e.i(65861),n=e.i(46416),o=e.i(30923),c=e.i(24457),d=e.i(62670);let u=(0,d.default)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var x=e.i(57403);let f=(0,d.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var h=e.i(62125),g=e.i(19754);e.s(["default",0,()=>{let{user:e,signOut:d}=(0,i.useAuth)(),m=(0,r.useRouter)(),[p,y]=(0,t.useState)([]),[b,v]=(0,t.useState)([]),[j,k]=(0,t.useState)(""),[N,w]=(0,t.useState)(null),[C,S]=(0,t.useState)(!1),z=async()=>{if(e)try{let{data:s,error:t}=await a.supabase.from("stacks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(t)throw t;y(s||[]),s&&s.length>0&&w(s[0].id)}catch(e){(0,h.showError)("Could not load your stacks.")}},T=async()=>{if(e&&N)try{let{data:e,error:s}=await a.supabase.from("saved_articles").select(`
          *,
          articles:articles (*)
        `).eq("stack_id",N).order("created_at",{ascending:!1});if(s)throw s;v(e||[])}catch(e){(0,h.showError)("Could not load saved articles.")}};(0,t.useEffect)(()=>{z()},[e]),(0,t.useEffect)(()=>{N&&T()},[N,e]);let D=async s=>{if(s.preventDefault(),j.trim()){S(!0);try{let{data:s,error:t}=await a.supabase.from("stacks").insert({name:j.trim(),user_id:e?.id}).select().single();if(t)throw t;y(e=>[s,...e]),w(s.id),k(""),(0,h.showSuccess)("Stack created")}catch(e){(0,h.showError)("Could not create stack.")}finally{S(!1)}}},_=async e=>{try{let{error:s}=await a.supabase.from("stacks").delete().eq("id",e);if(s)throw s;y(s=>s.filter(s=>s.id!==e)),N===e&&w(p.length>1?p[1].id:null),(0,h.showSuccess)("Stack removed")}catch(e){(0,h.showError)("Could not remove stack.")}},B=e=>{m.push(`/shelf/article/${e.id}`)};return(0,s.jsxs)("div",{className:"h-screen w-screen bg-background flex flex-col overflow-hidden",children:[(0,s.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-6 py-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start cursor-pointer group",onClick:()=>m.push("/shelf"),children:[(0,s.jsx)("span",{className:"text-[9px] uppercase tracking-[0.4em] font-sans font-bold text-gray-400 group-hover:text-gray-900 transition-colors",children:"The"}),(0,s.jsx)("h1",{className:"text-xl font-serif font-medium tracking-tight text-gray-900",children:"Open Shelf"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-6",children:(0,s.jsx)("button",{onClick:d,className:"p-2 text-gray-300 hover:text-red-500 transition-colors",title:"Sign Out",children:(0,s.jsx)(f,{size:16})})})]}),(0,s.jsxs)("main",{className:"flex-1 mt-[73px] flex overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-80 border-r border-gray-100 flex flex-col overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,s.jsx)("h2",{className:"text-lg font-serif font-medium text-gray-900",children:"Your Stacks"}),(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-sans mt-1",children:"Organize your saved articles"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)(o.Dialog,{children:[(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(l.Button,{variant:"outline",className:"w-full rounded-none border-gray-100 hover:border-gray-900 h-12 text-[10px] uppercase tracking-[0.3em] font-bold",children:[(0,s.jsx)(c.Plus,{size:14,className:"mr-2"}),"New Stack"]})}),(0,s.jsxs)(o.DialogContent,{className:"sm:max-w-md rounded-none border-gray-100",children:[(0,s.jsx)(o.DialogHeader,{children:(0,s.jsx)(o.DialogTitle,{className:"font-serif text-2xl font-medium",children:"Create New Stack"})}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-6 pt-6",children:[(0,s.jsx)(n.Input,{placeholder:"e.g., Philosophy, Technology, Reading List",value:j,onChange:e=>k(e.target.value),className:"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-12"}),(0,s.jsx)(l.Button,{type:"submit",disabled:C,className:"w-full rounded-none bg-gray-900 hover:bg-black h-12 text-[10px] uppercase tracking-[0.3em] font-bold",children:C?"Creating...":"Create Stack"})]})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:p.map(e=>(0,s.jsxs)("div",{className:`flex items-center justify-between p-3 rounded transition-colors ${N===e.id?"bg-gray-50 border border-gray-200":"hover:bg-gray-50"}`,children:[(0,s.jsxs)("button",{onClick:()=>w(e.id),className:"flex-1 text-left overflow-hidden",children:[(0,s.jsx)("p",{className:"font-serif font-medium text-base text-gray-900 truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-[9px] uppercase tracking-widest text-gray-400 truncate",children:[b.filter(s=>s.stack_id===e.id).length," articles"]})]}),(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>_(e.id),className:"text-gray-300 hover:text-red-500 transition-colors h-8 w-8",children:(0,s.jsx)(x.Trash2,{size:14})})]},e.id))})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto subtle-grid",children:N?(0,s.jsxs)("div",{className:"p-12",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-serif font-medium text-gray-900",children:p.find(e=>e.id===N)?.name}),(0,s.jsxs)("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-sans mt-2",children:[b.length," ",1===b.length?"article":"articles"]})]})}),0===b.length?(0,s.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 space-y-6",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-gray-400 font-serif italic text-xl",children:"This stack is empty."}),(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto",children:"Save articles from the canvas or feed to organize your reading."})]})}):(0,s.jsx)("div",{className:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 2xl:columns-5 gap-8 space-y-8",children:b.map(e=>(0,s.jsx)("div",{className:"break-inside-avoid",children:(0,s.jsx)(g.default,{article:e.articles,onClick:B})},e.id))})]}):(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-gray-400 font-serif italic text-xl",children:"Create your first stack."}),(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto",children:"Stacks help you organize and categorize your saved articles."})]}),(0,s.jsxs)(o.Dialog,{children:[(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(l.Button,{className:"flex items-center space-x-2 px-8 py-4 border border-gray-100 hover:border-gray-900 transition-all text-[10px] uppercase tracking-[0.3em] font-bold",children:[(0,s.jsx)(u,{size:16}),(0,s.jsx)("span",{children:"Create First Stack"})]})}),(0,s.jsxs)(o.DialogContent,{className:"sm:max-w-md rounded-none border-gray-100",children:[(0,s.jsx)(o.DialogHeader,{children:(0,s.jsx)(o.DialogTitle,{className:"font-serif text-2xl font-medium",children:"Create New Stack"})}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-6 pt-6",children:[(0,s.jsx)(n.Input,{placeholder:"e.g., Philosophy, Technology, Reading List",value:j,onChange:e=>k(e.target.value),className:"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-12"}),(0,s.jsx)(l.Button,{type:"submit",disabled:C,className:"w-full rounded-none bg-gray-900 hover:bg-black h-12 text-[10px] uppercase tracking-[0.3em] font-bold",children:C?"Creating...":"Create Stack"})]})]})]})]})})]})]})}],14052)}]);
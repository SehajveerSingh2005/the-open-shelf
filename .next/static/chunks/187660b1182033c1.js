(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89965,e=>{"use strict";let t,r,n;var s=e.i(92059),i=e.i(79307),a=e.i(58269),o=e.i(25070),l=e.i(84478),c=e.i(80257),u=e.i(55309),d=e.i(86493),h=e.i(53737),f=e.i(61716),p=e.i(44569),m=i.createContext(void 0);function g(e){let t=i.useContext(m);return e||t||"ltr"}var x="rovingFocusGroup.onEntryFocus",y={bubbles:!1,cancelable:!0},v="RovingFocusGroup",[b,w,j]=(0,c.createCollection)(v),[R,S]=(0,l.createContextScope)(v,[j]),[k,C]=R(v),E=i.forwardRef((e,t)=>(0,s.jsx)(b.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(b.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(N,{...e,ref:t})})}));E.displayName=v;var N=i.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:m,onEntryFocus:v,preventScrollOnEntryFocus:b=!1,...j}=e,R=i.useRef(null),S=(0,u.useComposedRefs)(t,R),C=g(l),[E=null,N]=(0,p.useControllableState)({prop:c,defaultProp:d,onChange:m}),[M,P]=i.useState(!1),I=(0,f.useCallbackRef)(v),O=w(r),_=i.useRef(!1),[D,F]=i.useState(0);return i.useEffect(()=>{let e=R.current;if(e)return e.addEventListener(x,I),()=>e.removeEventListener(x,I)},[I]),(0,s.jsx)(k,{scope:r,orientation:n,dir:C,loop:a,currentTabStopId:E,onItemFocus:i.useCallback(e=>N(e),[N]),onItemShiftTab:i.useCallback(()=>P(!0),[]),onFocusableItemAdd:i.useCallback(()=>F(e=>e+1),[]),onFocusableItemRemove:i.useCallback(()=>F(e=>e-1),[]),children:(0,s.jsx)(h.Primitive.div,{tabIndex:M||0===D?-1:0,"data-orientation":n,...j,ref:S,style:{outline:"none",...e.style},onMouseDown:(0,o.composeEventHandlers)(e.onMouseDown,()=>{_.current=!0}),onFocus:(0,o.composeEventHandlers)(e.onFocus,e=>{let t=!_.current;if(e.target===e.currentTarget&&t&&!M){let t=new CustomEvent(x,y);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=O().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current),b)}}_.current=!1}),onBlur:(0,o.composeEventHandlers)(e.onBlur,()=>P(!1))})})}),M="RovingFocusGroupItem",P=i.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:l,...c}=e,u=(0,d.useId)(),f=l||u,p=C(M,r),m=p.currentTabStopId===f,g=w(r),{onFocusableItemAdd:x,onFocusableItemRemove:y}=p;return i.useEffect(()=>{if(n)return x(),()=>y()},[n,x,y]),(0,s.jsx)(b.ItemSlot,{scope:r,id:f,focusable:n,active:a,children:(0,s.jsx)(h.Primitive.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...c,ref:t,onMouseDown:(0,o.composeEventHandlers)(e.onMouseDown,e=>{n?p.onItemFocus(f):e.preventDefault()}),onFocus:(0,o.composeEventHandlers)(e.onFocus,()=>p.onItemFocus(f)),onKeyDown:(0,o.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void p.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let s=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return I[s]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=g().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var r,n;"prev"===t&&s.reverse();let i=s.indexOf(e.currentTarget);s=p.loop?(r=s,n=i+1,r.map((e,t)=>r[(n+t)%r.length])):s.slice(i+1)}setTimeout(()=>T(s))}})})})});P.displayName=M;var I={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var O=e.i(68883),_="Tabs",[D,F]=(0,l.createContextScope)(_,[S]),A=S(),[z,L]=D(_),H=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=g(l),[m,x]=(0,p.useControllableState)({prop:n,onChange:i,defaultProp:a});return(0,s.jsx)(z,{scope:r,baseId:(0,d.useId)(),value:m,onValueChange:x,orientation:o,dir:f,activationMode:c,children:(0,s.jsx)(h.Primitive.div,{dir:f,"data-orientation":o,...u,ref:t})})});H.displayName=_;var Q="TabsList",U=i.forwardRef((e,t)=>{let{__scopeTabs:r,loop:n=!0,...i}=e,a=L(Q,r),o=A(r);return(0,s.jsx)(E,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:(0,s.jsx)(h.Primitive.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});U.displayName=Q;var q="TabsTrigger",B=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,disabled:i=!1,...a}=e,l=L(q,r),c=A(r),u=K(l.baseId,n),d=$(l.baseId,n),f=n===l.value;return(0,s.jsx)(P,{asChild:!0,...c,focusable:!i,active:f,children:(0,s.jsx)(h.Primitive.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:t,onMouseDown:(0,o.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(n)}),onKeyDown:(0,o.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(n)}),onFocus:(0,o.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==l.activationMode;f||i||!e||l.onValueChange(n)})})})});B.displayName=q;var W="TabsContent",V=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:a,children:o,...l}=e,c=L(W,r),u=K(c.baseId,n),d=$(c.baseId,n),f=n===c.value,p=i.useRef(f);return i.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(O.Presence,{present:a||f,children:({present:r})=>(0,s.jsx)(h.Primitive.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:r&&o})})});function K(e,t){return`${e}-trigger-${t}`}function $(e,t){return`${e}-content-${t}`}V.displayName=W;var Y=e.i(9854);let X=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)(U,{ref:r,className:(0,Y.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));X.displayName=U.displayName;let G=i.forwardRef(({className:e,...t},r)=>(0,s.jsx)(B,{ref:r,className:(0,Y.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));G.displayName=B.displayName,i.forwardRef(({className:e,...t},r)=>(0,s.jsx)(V,{ref:r,className:(0,Y.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})).displayName=V.displayName;var J=e.i(32791),Z=e.i(39056),ee=e.i(24573),et=e.i(77081);function er(e){let t=(0,et.useConstant)(()=>(0,Z.motionValue)(e)),{isStatic:r}=(0,i.useContext)(ee.MotionConfigContext);if(r){let[,r]=(0,i.useState)(e);(0,i.useEffect)(()=>t.on("change",r),[])}return t}var en=e.i(41667),es=e.i(10235),ei=e.i(13665);function ea(e){return"number"==typeof e?e:parseFloat(e)}var eo=e.i(31604),el=e.i(55287);function ec(e,t){let r=er(t()),n=()=>r.set(t());return n(),(0,el.useIsomorphicLayoutEffect)(()=>{let t=()=>ei.frame.preRender(n,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,ei.cancelFrame)(n)}}),r}function eu(e,t,r,n){if("function"==typeof e){let t;return Z.collectMotionValues.current=[],e(),t=ec(Z.collectMotionValues.current,e),Z.collectMotionValues.current=void 0,t}let s="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),r=t?0:-1,n=e[0+r],s=e[1+r],i=e[2+r],a=e[3+r],o=(0,eo.interpolate)(s,i,a);return t?o(n):o}(t,r,n);return Array.isArray(e)?ed(e,s):ed([e],([e])=>s(e))}function ed(e,t){let r=(0,et.useConstant)(()=>[]);return ec(e,()=>{r.length=0;let n=e.length;for(let t=0;t<n;t++)r[t]=e[t].get();return t(r)})}function eh(e,t={}){let{isStatic:r}=(0,i.useContext)(ee.MotionConfigContext),n=()=>(0,es.isMotionValue)(e)?e.get():e;if(r)return eu(n);let s=er(n());return(0,i.useInsertionEffect)(()=>(function(e,t,r){let n,s=e.get(),i=null,a=s,o="string"==typeof s?s.replace(/[\d.-]/g,""):void 0,l=()=>{i&&(i.stop(),i=null)},c=()=>{l(),i=new en.JSAnimation({keyframes:[ea(e.get()),ea(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:n})};if(e.attach((e,t)=>{a=e,n=e=>{var r,n;return t((r=e,(n=o)?r+n:r))},ei.frame.postRender(c)},l),(0,es.isMotionValue)(t)){let r=t.on("change",t=>{var r,n;return e.set((r=t,(n=o)?r+n:r))}),n=e.on("destroy",r);return()=>{r(),n()}}return l})(s,e,t),[s,JSON.stringify(t)]),s}var ef=e.i(19754);let ep="open-shelf-camera-v11",em=({articles:e,onArticleClick:t})=>{let r=(0,i.useRef)(null),[n]=(0,i.useState)(()=>(()=>{try{let e=localStorage.getItem(ep);return e?JSON.parse(e):{x:0,y:0,scale:.8}}catch{return{x:0,y:0,scale:.8}}})()),a=er(n.x),o=er(n.y),l=er(n.scale),c=eh(a,{damping:45,stiffness:350,mass:.6}),u=eh(o,{damping:45,stiffness:350,mass:.6}),d=eh(l,{damping:30,stiffness:300}),[h,f]=(0,i.useState)([]),p=(0,i.useRef)({x:-9999,y:-9999,scale:-1}),m=(0,i.useRef)(!1),g=(0,i.useRef)({x:0,y:0}),x=(0,i.useRef)(0),y=(0,i.useCallback)((t=!1)=>{let n=r.current;if(!n)return;let s=l.get(),i=a.get(),c=o.get(),{width:u,height:d}=e.dimensions;if(0===u||0===d)return;let h=Math.sqrt(Math.pow(i-p.current.x,2)+Math.pow(c-p.current.y,2)),m=Math.abs(s-p.current.scale);if(!t&&h<300&&m<.05)return;p.current={x:i,y:c,scale:s};let g=(-i-n.offsetWidth/2)/s-1200,x=(-i+n.offsetWidth/2)/s+1200,y=(-c-n.offsetHeight/2)/s-1200,v=(-c+n.offsetHeight/2)/s+1200,b=Math.floor(-i/u),w=Math.floor(-c/d),j=[];for(let t=b-2;t<=b+2;t++)for(let r=w-2;r<=w+2;r++){let n=t*u,s=r*d,i=Math.abs((31*t+17*r)%e.items.length);for(let a=0;a<e.items.length;a++){let o=(a+i)%e.items.length,l=e.items[o],c=l.x+n,u=l.y+s;c>=g&&c<=x&&u>=y&&u<=v&&j.push({article:l,offset:{x:n,y:s},key:`${l.id}-${t}-${r}`})}}f(j),localStorage.setItem(ep,JSON.stringify({x:i,y:c,scale:s}))},[e,l,a,o]);return(0,i.useEffect)(()=>{let e=a.on("change",()=>y()),t=o.on("change",()=>y()),r=l.on("change",()=>y());return y(!0),()=>{e(),t(),r()}},[a,o,l,y]),(0,i.useEffect)(()=>{let e=r.current;if(!e)return;let t=t=>{if(t.ctrlKey||t.metaKey){t.preventDefault();let r=e.getBoundingClientRect(),n=l.get(),s=Math.min(Math.max(n*(t.deltaY>0?.94:1.06),.3),1.2);if(s!==n){let e=t.clientX-r.left-r.width/2,i=t.clientY-r.top-r.height/2,c=(e-a.get())/n,u=(i-o.get())/n;a.set(e-c*s),o.set(i-u*s),l.set(s)}}else a.set(a.get()-t.deltaX),o.set(o.get()-t.deltaY)},n=e=>{0===e.button&&(m.current=!0,g.current={x:e.clientX,y:e.clientY},x.current=0)},s=e=>{if(!m.current)return;let t=e.clientX-g.current.x,r=e.clientY-g.current.y;x.current+=Math.sqrt(t*t+r*r),a.set(a.get()+t),o.set(o.get()+r),g.current={x:e.clientX,y:e.clientY}},i=()=>{m.current=!1};return e.addEventListener("wheel",t,{passive:!1}),window.addEventListener("mousedown",n),window.addEventListener("mousemove",s),window.addEventListener("mouseup",i),()=>{e.removeEventListener("wheel",t),window.removeEventListener("mousedown",n),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",i)}},[a,o,l]),(0,s.jsxs)("div",{ref:r,className:"w-full h-full relative overflow-hidden bg-background touch-none cursor-grab active:cursor-grabbing select-none",children:[(0,s.jsx)(J.motion.div,{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(to right, #000 1px, transparent 1px), linear-gradient(to bottom, #000 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:eu([c,u],([e,t])=>`calc(50% + ${e}px) calc(50% + ${t}px)`)}}),(0,s.jsx)(J.motion.div,{style:{x:c,y:u,scale:d},className:"absolute left-1/2 top-1/2 pointer-events-none",children:h.map(({article:e,offset:r,key:n})=>(0,s.jsx)("div",{className:"absolute pointer-events-auto",style:{left:e.x+r.x,top:e.y+r.y,transform:"translateX(-50%)",willChange:"transform"},children:(0,s.jsx)(ef.default,{article:e,onClick:e=>x.current<10&&t(e),isCanvas:!0})},n))})]})},eg=({articles:e,onArticleClick:t})=>(0,s.jsx)("div",{className:"w-full max-w-[2000px] mx-auto px-6 py-12",children:(0,s.jsx)("div",{className:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 2xl:columns-5 gap-8 space-y-8",children:e.map(e=>(0,s.jsx)("div",{className:"break-inside-avoid",children:(0,s.jsx)(ef.default,{article:e,onClick:t})},e.id))})});var ex=e.i(34747),ey=e.i(81439),ev=e.i(52042);function eb(e,t){let r,n=()=>{let{currentTime:n}=t,s=(null===n?0:n.value)/100;r!==s&&e(s),r=s};return ei.frame.preUpdate(n,!0),()=>(0,ei.cancelFrame)(n)}var ew=e.i(955),ej=e.i(51023),eR=e.i(63651);let eS=new WeakMap,ek=(e,t,r)=>(n,s)=>s&&s[0]?s[0][e+"Size"]:(0,ej.isSVGElement)(n)&&"getBBox"in n?n.getBBox()[t]:n[r],eC=ek("inline","width","offsetWidth"),eE=ek("block","height","offsetHeight");function eN({target:e,borderBoxSize:t}){eS.get(e)?.forEach(r=>{r(e,{get width(){return eC(e,t)},get height(){return eE(e,t)}})})}function eM(e){e.forEach(eN)}let eP=new Set;var eI=e.i(11446),eT=e.i(86915);let eO=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),e_={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function eD(e,t,r,n){let s=r[t],{length:i,position:a}=e_[t],o=s.current,l=r.time;s.current=e[`scroll${a}`],s.scrollLength=e[`scroll${i}`]-e[`client${i}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=(0,eI.progress)(0,s.scrollLength,s.current);let c=n-l;s.velocity=c>50?0:(0,eT.velocityPerSecond)(s.current-o,c)}e.i(52975);var eF=e.i(62152),eA=e.i(69880),ez=e.i(33973);let eL={start:0,center:.5,end:1};function eH(e,t,r=0){let n=0;if(e in eL&&(e=eL[e]),"string"==typeof e){let t=parseFloat(e);e.endsWith("px")?n=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?n=t/100*document.documentElement.clientWidth:e.endsWith("vh")?n=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(n=t*e),r+n}let eQ=[0,0],eU=[[0,0],[1,1]],eq={x:0,y:0},eB=new WeakMap,eW=new WeakMap,eV=new WeakMap,eK=e=>e===document.scrollingElement?window:e;function e$(e,{container:n=document.scrollingElement,...s}={}){if(!n)return ev.noop;let i=eV.get(n);i||(i=new Set,eV.set(n,i));let a=function(e,t,r,n={}){return{measure:t=>{!function(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)r.x.targetOffset+=n.offsetLeft,r.y.targetOffset+=n.offsetTop,n=n.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}(e,n.target,r),eD(e,"x",r,t),eD(e,"y",r,t),r.time=t,(n.offset||n.target)&&function(e,t,r){let{offset:n=eU}=r,{target:s=e,axis:i="y"}=r,a="y"===i?"height":"width",o=s!==e?function(e,t){let r={x:0,y:0},n=e;for(;n&&n!==t;)if((0,ez.isHTMLElement)(n))r.x+=n.offsetLeft,r.y+=n.offsetTop,n=n.offsetParent;else if("svg"===n.tagName){let e=n.getBoundingClientRect(),t=(n=n.parentElement).getBoundingClientRect();r.x+=e.left-t.left,r.y+=e.top-t.top}else if(n instanceof SVGGraphicsElement){let{x:e,y:t}=n.getBBox();r.x+=e,r.y+=t;let s=null,i=n.parentNode;for(;!s;)"svg"===i.tagName&&(s=i),i=n.parentNode;n=s}else break;return r}(s,e):eq,l=s===e?{width:e.scrollWidth,height:e.scrollHeight}:"getBBox"in s&&"svg"!==s.tagName?s.getBBox():{width:s.clientWidth,height:s.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let u=!t[i].interpolate,d=n.length;for(let e=0;e<d;e++){let r=function(e,t,r,n){let s=Array.isArray(e)?e:eQ,i=0;return"number"==typeof e?s=[e,e]:"string"==typeof e&&(s=(e=e.trim()).includes(" ")?e.split(" "):[e,eL[e]?e:"0"]),(i=eH(s[0],r,n))-eH(s[1],t)}(n[e],c[a],l[a],o[i]);u||r===t[i].interpolatorOffsets[e]||(u=!0),t[i].offset[e]=r}u&&(t[i].interpolate=(0,eo.interpolate)(t[i].offset,(0,eF.defaultOffset)(n),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=(0,eA.clamp)(0,1,t[i].interpolate(t[i].current))}(e,r,n)},notify:()=>t(r)}}(n,e,{time:0,x:eO(),y:eO()},s);if(i.add(a),!eB.has(n)){let e,s=()=>{for(let e of i)e.measure(ei.frameData.timestamp);ei.frame.preUpdate(a)},a=()=>{for(let e of i)e.notify()},o=()=>ei.frame.read(s);eB.set(n,o);let l=eK(n);window.addEventListener("resize",o,{passive:!0}),n!==document.documentElement&&eW.set(n,"function"==typeof n?(eP.add(n),r||(r=()=>{let e={get width(){return window.innerWidth},get height(){return window.innerHeight}};eP.forEach(t=>t(e))},window.addEventListener("resize",r)),()=>{eP.delete(n),eP.size||"function"!=typeof r||(window.removeEventListener("resize",r),r=void 0)}):(!t&&"u">typeof ResizeObserver&&(t=new ResizeObserver(eM)),(e=(0,eR.resolveElements)(n)).forEach(e=>{let r=eS.get(e);r||(r=new Set,eS.set(e,r)),r.add(o),t?.observe(e)}),()=>{e.forEach(e=>{let r=eS.get(e);r?.delete(o),r?.size||t?.unobserve(e)})})),l.addEventListener("scroll",o,{passive:!0}),o()}let o=eB.get(n);return ei.frame.read(o,!1,!0),()=>{(0,ei.cancelFrame)(o);let e=eV.get(n);if(!e||(e.delete(a),e.size))return;let t=eB.get(n);eB.delete(n),t&&(eK(n).removeEventListener("scroll",t),eW.get(n)?.(),window.removeEventListener("resize",t))}}let eY=new Map;function eX({source:e,container:t,...r}){var n;let s,i,{axis:a}=r;e&&(t=e);let o=eY.get(t)??new Map;eY.set(t,o);let l=r.target??"self",c=o.get(l)??{},u=a+(r.offset??[]).join(",");return c[u]||(c[u]=!r.target&&(0,ew.supportsScrollTimeline)()?new ScrollTimeline({source:t,axis:a}):(n={container:t,...r},s={value:0},i=e$(e=>{s.value=100*e[n.axis].progress},n),{currentTime:s,cancel:i})),c[u]}let eG=()=>({scrollX:(0,Z.motionValue)(0),scrollY:(0,Z.motionValue)(0),scrollXProgress:(0,Z.motionValue)(0),scrollYProgress:(0,Z.motionValue)(0)}),eJ=e=>!!e&&!e.current;var eZ=e.i(5011),e0=e.i(62670);let e1=(0,e0.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),e2=(0,e0.default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),e4=(0,e0.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),e5=(0,e0.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var e9=e.i(65861),e3=e.i(31935),e6=e.i(94638),e7=e.i(54964),e8=e.i(88304),te=e.i(83297),tt=e.i(38604),tr=e.i(58970),tn=e.i(96061),ts="Popover",[ti,ta]=(0,l.createContextScope)(ts,[e8.createPopperScope]),to=(0,e8.createPopperScope)(),[tl,tc]=ti(ts),tu=e=>{let{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:l=!1}=e,c=to(t),u=i.useRef(null),[h,f]=i.useState(!1),[m=!1,g]=(0,p.useControllableState)({prop:n,defaultProp:a,onChange:o});return(0,s.jsx)(e8.Root,{...c,children:(0,s.jsx)(tl,{scope:t,contentId:(0,d.useId)(),triggerRef:u,open:m,onOpenChange:g,onOpenToggle:i.useCallback(()=>g(e=>!e),[g]),hasCustomAnchor:h,onCustomAnchorAdd:i.useCallback(()=>f(!0),[]),onCustomAnchorRemove:i.useCallback(()=>f(!1),[]),modal:l,children:r})})};tu.displayName=ts;var td="PopoverAnchor";i.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,a=tc(td,r),o=to(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=a;return i.useEffect(()=>(l(),()=>c()),[l,c]),(0,s.jsx)(e8.Anchor,{...o,...n,ref:t})}).displayName=td;var th="PopoverTrigger",tf=i.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=tc(th,r),a=to(r),l=(0,u.useComposedRefs)(t,i.triggerRef),c=(0,s.jsx)(h.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tk(i.open),...n,ref:l,onClick:(0,o.composeEventHandlers)(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:(0,s.jsx)(e8.Anchor,{asChild:!0,...a,children:c})});tf.displayName=th;var tp="PopoverPortal",[tm,tg]=ti(tp,{forceMount:void 0}),tx=e=>{let{__scopePopover:t,forceMount:r,children:n,container:i}=e,a=tc(tp,t);return(0,s.jsx)(tm,{scope:t,forceMount:r,children:(0,s.jsx)(O.Presence,{present:r||a.open,children:(0,s.jsx)(te.Portal,{asChild:!0,container:i,children:n})})})};tx.displayName=tp;var ty="PopoverContent",tv=i.forwardRef((e,t)=>{let r=tg(ty,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,a=tc(ty,e.__scopePopover);return(0,s.jsx)(O.Presence,{present:n||a.open,children:a.modal?(0,s.jsx)(tw,{...i,ref:t}):(0,s.jsx)(tj,{...i,ref:t})})});tv.displayName=ty;var tb=(0,tt.createSlot)("PopoverContent.RemoveScroll"),tw=i.forwardRef((e,t)=>{let r=tc(ty,e.__scopePopover),n=i.useRef(null),a=(0,u.useComposedRefs)(t,n),l=i.useRef(!1);return i.useEffect(()=>{let e=n.current;if(e)return(0,tr.hideOthers)(e)},[]),(0,s.jsx)(tn.RemoveScroll,{as:tb,allowPinchZoom:!0,children:(0,s.jsx)(tR,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,o.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),l.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,o.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;l.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,o.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),tj=i.forwardRef((e,t)=>{let r=tc(ty,e.__scopePopover),n=i.useRef(!1),a=i.useRef(!1);return(0,s.jsx)(tR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));let s=t.target;r.triggerRef.current?.contains(s)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),tR=i.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=e,f=tc(ty,r),p=to(r);return(0,e6.useFocusGuards)(),(0,s.jsx)(e7.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,s.jsx)(e3.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:(0,s.jsx)(e8.Content,{"data-state":tk(f.open),role:"dialog",id:f.contentId,...p,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),tS="PopoverClose";function tk(e){return e?"open":"closed"}i.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=tc(tS,r);return(0,s.jsx)(h.Primitive.button,{type:"button",...n,ref:t,onClick:(0,o.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})}).displayName=tS,i.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,i=to(r);return(0,s.jsx)(e8.Arrow,{...i,...n,ref:t})}).displayName="PopoverArrow";let tC=i.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>(0,s.jsx)(tx,{children:(0,s.jsx)(tv,{ref:i,align:t,sideOffset:r,className:(0,Y.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));function tE(e,[t,r]){return Math.min(r,Math.max(t,e))}tC.displayName=tv.displayName;var tN=e.i(89e3),tM=["PageUp","PageDown"],tP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tT="Slider",[tO,t_,tD]=(0,c.createCollection)(tT),[tF,tA]=(0,l.createContextScope)(tT,[tD]),[tz,tL]=tF(tT),tH=i.forwardRef((e,t)=>{let{name:r,min:n=0,max:a=100,step:l=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[n],value:f,onValueChange:m=()=>{},onValueCommit:g=()=>{},inverted:x=!1,form:y,...v}=e,b=i.useRef(new Set),w=i.useRef(0),j="horizontal"===c,[R=[],S]=(0,p.useControllableState)({prop:f,defaultProp:h,onChange:e=>{let t=[...b.current];t[w.current]?.focus(),m(e)}}),k=i.useRef(R);function C(e,t,{commit:r}={commit:!1}){let s,i=(String(l).split(".")[1]||"").length,o=tE(Math.round((Math.round((e-n)/l)*l+n)*(s=Math.pow(10,i)))/s,[n,a]);S((e=[])=>{let n=function(e=[],t,r){let n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,o,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(n,d*l))return e;{w.current=n.indexOf(o);let t=String(n)!==String(e);return t&&r&&g(n),t?n:e}})}return(0,s.jsx)(tz,{scope:e.__scopeSlider,name:r,disabled:u,min:n,max:a,valueIndexToChangeRef:w,thumbs:b.current,values:R,orientation:c,form:y,children:(0,s.jsx)(tO.Provider,{scope:e.__scopeSlider,children:(0,s.jsx)(tO.Slot,{scope:e.__scopeSlider,children:(0,s.jsx)(j?tq:tB,{"aria-disabled":u,"data-disabled":u?"":void 0,...v,ref:t,onPointerDown:(0,o.composeEventHandlers)(v.onPointerDown,()=>{u||(k.current=R)}),min:n,max:a,inverted:x,onSlideStart:u?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(R,e);C(e,t)},onSlideMove:u?void 0:function(e){C(e,w.current)},onSlideEnd:u?void 0:function(){let e=k.current[w.current];R[w.current]!==e&&g(R)},onHomeKeyDown:()=>!u&&C(n,0,{commit:!0}),onEndKeyDown:()=>!u&&C(a,R.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!u){let r=tM.includes(e.key)||e.shiftKey&&tP.includes(e.key),n=w.current;C(R[n]+l*(r?10:1)*t,n,{commit:!0})}}})})})})});tH.displayName=tT;var[tQ,tU]=tF(tT,{startEdge:"left",endEdge:"right",size:"width",direction:1}),tq=i.forwardRef((e,t)=>{let{min:r,max:n,dir:a,inverted:o,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...f}=e,[p,m]=i.useState(null),x=(0,u.useComposedRefs)(t,e=>m(e)),y=i.useRef(void 0),v=g(a),b="ltr"===v,w=b&&!o||!b&&o;function j(e){let t=y.current||p.getBoundingClientRect(),s=t1([0,t.width],w?[r,n]:[n,r]);return y.current=t,s(e-t.left)}return(0,s.jsx)(tQ,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:(0,s.jsx)(tW,{dir:v,"data-orientation":"horizontal",...f,ref:x,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=j(e.clientX);l?.(t)},onSlideMove:e=>{let t=j(e.clientX);c?.(t)},onSlideEnd:()=>{y.current=void 0,d?.()},onStepKeyDown:e=>{let t=tI[w?"from-left":"from-right"].includes(e.key);h?.({event:e,direction:t?-1:1})}})})}),tB=i.forwardRef((e,t)=>{let{min:r,max:n,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,f=i.useRef(null),p=(0,u.useComposedRefs)(t,f),m=i.useRef(void 0),g=!a;function x(e){let t=m.current||f.current.getBoundingClientRect(),s=t1([0,t.height],g?[n,r]:[r,n]);return m.current=t,s(e-t.top)}return(0,s.jsx)(tQ,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:(0,s.jsx)(tW,{"data-orientation":"vertical",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=x(e.clientY);o?.(t)},onSlideMove:e=>{let t=x(e.clientY);l?.(t)},onSlideEnd:()=>{m.current=void 0,c?.()},onStepKeyDown:e=>{let t=tI[g?"from-bottom":"from-top"].includes(e.key);d?.({event:e,direction:t?-1:1})}})})}),tW=i.forwardRef((e,t)=>{let{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:u,...d}=e,f=tL(tT,r);return(0,s.jsx)(h.Primitive.span,{...d,ref:t,onKeyDown:(0,o.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):tM.concat(tP).includes(e.key)&&(u(e),e.preventDefault())}),onPointerDown:(0,o.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),f.thumbs.has(t)?t.focus():n(e)}),onPointerMove:(0,o.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:(0,o.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))})})}),tV="SliderTrack",tK=i.forwardRef((e,t)=>{let{__scopeSlider:r,...n}=e,i=tL(tV,r);return(0,s.jsx)(h.Primitive.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});tK.displayName=tV;var t$="SliderRange",tY=i.forwardRef((e,t)=>{let{__scopeSlider:r,...n}=e,a=tL(t$,r),o=tU(t$,r),l=i.useRef(null),c=(0,u.useComposedRefs)(t,l),d=a.values.length,f=a.values.map(e=>t0(e,a.min,a.max)),p=d>1?Math.min(...f):0,m=100-Math.max(...f);return(0,s.jsx)(h.Primitive.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:c,style:{...e.style,[o.startEdge]:p+"%",[o.endEdge]:m+"%"}})});tY.displayName=t$;var tX="SliderThumb",tG=i.forwardRef((e,t)=>{let r=t_(e.__scopeSlider),[n,a]=i.useState(null),o=(0,u.useComposedRefs)(t,e=>a(e)),l=i.useMemo(()=>n?r().findIndex(e=>e.ref.current===n):-1,[r,n]);return(0,s.jsx)(tJ,{...e,ref:o,index:l})}),tJ=i.forwardRef((e,t)=>{var r,n,a,l,c;let d,f,{__scopeSlider:p,index:m,name:g,...x}=e,y=tL(tX,p),v=tU(tX,p),[b,w]=i.useState(null),j=(0,u.useComposedRefs)(t,e=>w(e)),R=!b||y.form||!!b.closest("form"),S=(0,tN.useSize)(b),k=y.values[m],C=void 0===k?0:t0(k,y.min,y.max),E=(r=m,(n=y.values.length)>2?`Value ${r+1} of ${n}`:2===n?["Minimum","Maximum"][r]:void 0),N=S?.[v.size],M=N?(a=N,l=C,c=v.direction,f=t1([0,50],[0,d=a/2]),(d-f(l)*c)*c):0;return i.useEffect(()=>{if(b)return y.thumbs.add(b),()=>{y.thumbs.delete(b)}},[b,y.thumbs]),(0,s.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${C}% + ${M}px)`},children:[(0,s.jsx)(tO.ItemSlot,{scope:e.__scopeSlider,children:(0,s.jsx)(h.Primitive.span,{role:"slider","aria-label":e["aria-label"]||E,"aria-valuemin":y.min,"aria-valuenow":k,"aria-valuemax":y.max,"aria-orientation":y.orientation,"data-orientation":y.orientation,"data-disabled":y.disabled?"":void 0,tabIndex:y.disabled?void 0:0,...x,ref:j,style:void 0===k?{display:"none"}:e.style,onFocus:(0,o.composeEventHandlers)(e.onFocus,()=>{y.valueIndexToChangeRef.current=m})})}),R&&(0,s.jsx)(tZ,{name:g??(y.name?y.name+(y.values.length>1?"[]":""):void 0),form:y.form,value:k},m)]})});tG.displayName=tX;var tZ=e=>{let t,{value:r,...n}=e,a=i.useRef(null),o=(t=i.useRef({value:r,previous:r}),i.useMemo(()=>(t.current.value!==r&&(t.current.previous=t.current.value,t.current.value=r),t.current.previous),[r]));return i.useEffect(()=>{let e=a.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(o!==r&&t){let n=new Event("input",{bubbles:!0});t.call(e,r),e.dispatchEvent(n)}},[o,r]),(0,s.jsx)("input",{style:{display:"none"},...n,ref:a,defaultValue:r})};function t0(e,t,r){return tE(100/(r-t)*(e-t),[0,100])}function t1(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}let t2=i.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(tH,{ref:r,className:(0,Y.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[(0,s.jsx)(tK,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(tY,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(tG,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));t2.displayName=tH.displayName;let t4="open-shelf-reader-settings",t5=({article:e,onClose:t})=>{let[r,n]=(0,i.useState)(()=>{try{let e=localStorage.getItem(t4);return e?JSON.parse(e):{fontSize:20,lineHeight:1.75,fontType:"sans",theme:"light"}}catch{return{fontSize:20,lineHeight:1.75,fontType:"sans",theme:"light"}}}),a=(e,t)=>{let s={...r,[e]:t};n(s),localStorage.setItem(t4,JSON.stringify(s))},o=(0,i.useRef)(null),{scrollYProgress:l}=function({container:e,target:t,...r}={}){let n=(0,et.useConstant)(eG),s=(0,i.useRef)(null),a=(0,i.useRef)(!1),o=(0,i.useCallback)(()=>(s.current=function(e,{axis:t="y",container:r=document.scrollingElement,...n}={}){var s,i;let a;if(!r)return ev.noop;let o={axis:t,container:r,...n};return"function"==typeof e?(s=e,i=o,2===s.length?e$(e=>{s(e[i.axis].progress,e)},i):eb(s,eX(i))):(a=eX(o),e.attachTimeline({timeline:o.target?void 0:a,observe:e=>(e.pause(),eb(t=>{e.time=e.iterationDuration*t},a))}))}((e,{x:t,y:r})=>{n.scrollX.set(t.current),n.scrollXProgress.set(t.progress),n.scrollY.set(r.current),n.scrollYProgress.set(r.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0}),()=>{s.current?.()}),[e,t,JSON.stringify(r.offset)]);return(0,el.useIsomorphicLayoutEffect)(()=>{if(a.current=!1,!(eJ(e)||eJ(t)))return o();a.current=!0},[o]),(0,i.useEffect)(()=>a.current?((0,ey.invariant)(!eJ(e),"Container ref is defined but not hydrated","use-scroll-ref"),(0,ey.invariant)(!eJ(t),"Target ref is defined but not hydrated","use-scroll-ref"),o()):void 0,[o]),n}({container:o}),c=eh(l,{stiffness:100,damping:30,restDelta:.001});return(0,i.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),(0,s.jsxs)(J.motion.div,{ref:o,initial:{y:"100vh"},animate:{y:0},exit:{y:"100vh"},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:(0,Y.cn)("fixed inset-0 z-50 overflow-y-auto transition-colors duration-500","light"===r.theme?"bg-[#fff] text-gray-900":"bg-[#0a0a0a] text-gray-100"),children:[(0,s.jsxs)("div",{className:(0,Y.cn)("fixed top-0 left-0 right-0 h-14 z-50 flex items-center justify-between px-6 transition-all duration-300","light"===r.theme?"bg-white border-b border-gray-50":"bg-[#0a0a0a] border-b border-gray-900"),children:[(0,s.jsx)(J.motion.div,{className:"absolute bottom-0 left-0 right-0 h-[1.5px] bg-gray-900 dark:bg-gray-100 origin-left",style:{scaleX:c}}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 overflow-hidden",children:[(0,s.jsx)("span",{className:(0,Y.cn)("text-[9px] uppercase tracking-[0.3em] font-sans font-semibold whitespace-nowrap","light"===r.theme?"text-gray-400":"text-gray-600"),children:e.source}),(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,s.jsx)("p",{className:(0,Y.cn)("text-[10px] uppercase tracking-wider truncate font-sans font-medium","light"===r.theme?"text-gray-500":"text-gray-400"),children:e.title})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)(tu,{children:[(0,s.jsx)(tf,{asChild:!0,children:(0,s.jsx)(e9.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-gray-900 dark:hover:text-white",children:(0,s.jsx)(e2,{size:16})})}),(0,s.jsx)(tC,{className:"w-64 p-5 space-y-6 rounded-none border-gray-100",align:"end",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Appearance"}),(0,s.jsxs)("div",{className:"flex border rounded-none p-0.5",children:[(0,s.jsx)("button",{onClick:()=>a("theme","light"),className:(0,Y.cn)("p-1.5 transition-colors","light"===r.theme?"bg-gray-100":""),children:(0,s.jsx)(e5,{size:12})}),(0,s.jsx)("button",{onClick:()=>a("theme","dark"),className:(0,Y.cn)("p-1.5 transition-colors","dark"===r.theme?"bg-gray-100":""),children:(0,s.jsx)(e4,{size:12})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Typeface"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-1",children:["serif","sans","mono"].map(e=>(0,s.jsx)(e9.Button,{variant:r.fontType===e?"secondary":"outline",size:"sm",className:"rounded-none text-[10px] h-7 capitalize",onClick:()=>a("fontType",e),children:e},e))})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Size"}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-500",children:[r.fontSize,"px"]})]}),(0,s.jsx)(t2,{value:[r.fontSize],onValueChange:e=>a("fontSize",e[0]),min:16,max:28,step:1,className:"py-2"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Line"}),(0,s.jsx)("span",{className:"text-[10px] text-gray-500",children:r.lineHeight.toFixed(2)})]}),(0,s.jsx)(t2,{value:[r.lineHeight],onValueChange:e=>a("lineHeight",e[0]),min:1.4,max:2.2,step:.05,className:"py-2"})]})]})})]}),(0,s.jsx)(e9.Button,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 text-gray-400 hover:text-gray-900 dark:hover:text-white",children:(0,s.jsx)(eZ.X,{size:18})})]})]}),(0,s.jsxs)(J.motion.article,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.6,ease:[.16,1,.3,1]},className:"max-w-3xl mx-auto px-6 md:px-10 py-32",children:[(0,s.jsx)("header",{className:"mb-24 space-y-10",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("p",{className:(0,Y.cn)("text-[10px] uppercase tracking-[0.5em] font-sans font-bold","light"===r.theme?"text-gray-400":"text-gray-600"),children:[e.source," â€¢ ",e.publishedAt]}),(0,s.jsx)("h1",{className:(0,Y.cn)("text-5xl md:text-7xl font-serif font-medium leading-[1.0] tracking-tight","light"===r.theme?"text-gray-900":"text-gray-100"),children:e.title}),(0,s.jsxs)("div",{className:(0,Y.cn)("flex items-center space-x-4 text-xl md:text-2xl font-serif italic border-t pt-8","light"===r.theme?"text-gray-400 border-gray-50":"text-gray-500 border-gray-900"),children:[(0,s.jsxs)("span",{children:["by ",e.author]}),(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-current opacity-20"}),(0,s.jsx)("span",{children:e.readingTime})]})]})}),(0,s.jsx)("div",{className:(0,Y.cn)("prose prose-lg max-w-none transition-all duration-300 selection:bg-gray-100 selection:text-black","serif"===r.fontType?"font-serif":"mono"===r.fontType?"font-mono":"font-sans","light"===r.theme?"prose-gray":"prose-invert prose-gray","[&_img]:mx-auto [&_img]:block [&_img]:rounded-none [&_img]:mt-16 [&_img]:mb-8 [&_img]:max-w-full","[&_button]:hidden [&_a.expand]:hidden [&_div.expand]:hidden [&_.image-expand]:hidden","[&_p]:mb-8 [&_p]:leading-relaxed","[&_h2]:font-serif [&_h2]:text-3xl [&_h2]:mt-16 [&_h2]:mb-8","[&_blockquote]:border-l-[1px] [&_blockquote]:border-gray-200 [&_blockquote]:italic [&_blockquote]:text-2xl [&_blockquote]:font-serif [&_blockquote]:pl-10 [&_blockquote]:my-16","prose-a:underline prose-a:underline-offset-4 prose-a:decoration-gray-200 hover:prose-a:decoration-gray-900 prose-a:text-gray-900 dark:prose-a:text-gray-100 transition-colors"),style:{fontSize:`${r.fontSize}px`,lineHeight:r.lineHeight},dangerouslySetInnerHTML:{__html:e.content}}),(0,s.jsx)("footer",{className:"mt-40 pt-20 border-t border-gray-50 dark:border-gray-900 flex justify-center",children:(0,s.jsx)(e9.Button,{variant:"outline",asChild:!0,className:(0,Y.cn)("rounded-none px-10 h-14 text-[10px] uppercase tracking-[0.4em] transition-all","light"===r.theme?"border-gray-200 hover:bg-gray-900 hover:text-white":"border-gray-800 text-gray-500 hover:bg-white hover:text-black"),children:(0,s.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{children:"Read Original"}),(0,s.jsx)(e1,{size:12})]})})})]})]})},t9=({article:e,onClose:t})=>(0,s.jsx)(ex.AnimatePresence,{mode:"wait",children:e&&(0,s.jsx)(t5,{article:e,onClose:t},e.id)});var t3=e.i(53379),t6=e.i(30923),t7=e.i(46416),t8=e.i(27715),re=e.i(57403),rt=e.i(24457);let rr=(0,e0.default)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),rn=(0,e0.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rs=(0,e0.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var ri=e.i(62125);let ra=({onUpdate:e,trigger:t})=>{let[r,n]=(0,i.useState)([]),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),h=async(e=!0)=>{e&&o(!0);let{data:t,error:r}=await t3.supabase.from("feeds").select("*").order("created_at",{ascending:!1});!r&&t&&n(t),e&&o(!1)},f=async t=>{if(t.preventDefault(),l){d(!0);try{let{error:t}=await t3.supabase.functions.invoke("fetch-rss",{body:{feedUrl:l}});if(t)throw t;(0,ri.showSuccess)("Source added to shelf"),c(""),await h(!1),e()}catch(e){(0,ri.showError)("Could not connect to feed.")}finally{d(!1)}}},p=async(t,r)=>{n(e=>e.map(e=>e.id===t?{...e,is_hidden:!r}:e));let{error:s}=await t3.supabase.from("feeds").update({is_hidden:!r}).eq("id",t);s?((0,ri.showError)("Could not update visibility."),h(!1)):e()},m=async t=>{let s=[...r];n(e=>e.filter(e=>e.id!==t));let{error:i}=await t3.supabase.from("feeds").delete().eq("id",t);i?((0,ri.showError)("Could not remove source."),n(s)):((0,ri.showSuccess)("Source removed"),e())};return(0,i.useEffect)(()=>{h()},[]),(0,s.jsxs)(t6.Dialog,{children:[(0,s.jsx)(t6.DialogTrigger,{asChild:!0,children:t||(0,s.jsxs)("button",{className:"flex items-center space-x-2 text-[10px] uppercase tracking-[0.2em] text-gray-400 hover:text-gray-900 transition-colors",children:[(0,s.jsx)(rr,{size:14}),(0,s.jsx)("span",{children:"Manage Feeds"})]})}),(0,s.jsxs)(t6.DialogContent,{className:"sm:max-w-md rounded-none border-gray-100",children:[(0,s.jsx)(t6.DialogHeader,{children:(0,s.jsx)(t6.DialogTitle,{className:"font-serif text-3xl font-medium",children:"Your Library"})}),(0,s.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,s.jsxs)("form",{onSubmit:f,className:"flex items-stretch space-x-2",children:[(0,s.jsx)(t7.Input,{placeholder:"https://example.com/feed",value:l,onChange:e=>c(e.target.value),className:"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-11 flex-1 transition-colors"}),(0,s.jsx)(e9.Button,{type:"submit",disabled:u,className:"rounded-none bg-gray-900 hover:bg-black px-6 h-11",children:u?(0,s.jsx)(t8.Loader2,{className:"animate-spin",size:16}):(0,s.jsx)(rt.Plus,{size:16})})]}),(0,s.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-3 pr-2 scrollbar-thin",children:a&&0===r.length?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)(t8.Loader2,{className:"animate-spin text-gray-200"})}):0===r.length?(0,s.jsx)("p",{className:"text-center text-sm text-gray-400 font-serif italic py-8",children:"No sources yet."}):r.map(e=>(0,s.jsxs)("div",{className:`flex items-center justify-between p-4 border transition-all duration-300 ${e.is_hidden?"bg-gray-50/50 border-gray-100 opacity-60":"bg-white border-gray-100 hover:border-gray-300"}`,children:[(0,s.jsxs)("div",{className:"overflow-hidden pr-4",children:[(0,s.jsx)("p",{className:`font-serif font-medium truncate text-lg transition-all ${e.is_hidden?"text-gray-400 line-through":"text-gray-900"}`,children:e.title}),(0,s.jsx)("p",{className:"text-[9px] text-gray-400 truncate uppercase tracking-widest",children:e.url})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 shrink-0",children:[(0,s.jsx)(e9.Button,{variant:"ghost",size:"icon",onClick:()=>p(e.id,e.is_hidden),className:"text-gray-300 hover:text-gray-900 transition-colors h-9 w-9",children:e.is_hidden?(0,s.jsx)(rs,{size:16}):(0,s.jsx)(rn,{size:16})}),(0,s.jsx)(e9.Button,{variant:"ghost",size:"icon",onClick:()=>m(e.id),className:"text-gray-300 hover:text-red-500 transition-colors h-9 w-9",children:(0,s.jsx)(re.Trash2,{size:16})})]})]},e.id))})]})]})]})};var ro=e.i(67730),rl=e.i(21541),rc=e.i(36244),ru=e.i(86817),rd=e.i(26925),rh=e.i(42506),rf=class extends ru.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,rd.pendingThenable)(),this.options.experimental_prefetchInRender||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#n=void 0;#s=void 0;#i=void 0;#a;#o;#r;#t;#l;#c;#u;#d;#h;#f;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#n.addObserver(this),rp(this.#n,this.options)?this.#m():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rm(this.#n,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rm(this.#n,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#y(),this.#n.removeObserver(this)}setOptions(e){let t=this.options,r=this.#n;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,rh.resolveEnabled)(this.options.enabled,this.#n))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#v(),this.#n.setOptions(this.options),t._defaulted&&!(0,rh.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#n,observer:this});let n=this.hasListeners();n&&rg(this.#n,r,this.options,t)&&this.#m(),this.updateResult(),n&&(this.#n!==r||(0,rh.resolveEnabled)(this.options.enabled,this.#n)!==(0,rh.resolveEnabled)(t.enabled,this.#n)||(0,rh.resolveStaleTime)(this.options.staleTime,this.#n)!==(0,rh.resolveStaleTime)(t.staleTime,this.#n))&&this.#b();let s=this.#w();n&&(this.#n!==r||(0,rh.resolveEnabled)(this.options.enabled,this.#n)!==(0,rh.resolveEnabled)(t.enabled,this.#n)||s!==this.#f)&&this.#j(s)}getOptimisticResult(e){var t,r;let n=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(n,e);return t=this,r=s,(0,rh.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#i=s,this.#o=this.options,this.#a=this.#n.state),s}getCurrentResult(){return this.#i}trackResult(e,t){let r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),t?.(n),e[n])})}),r}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#n}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#m(e){this.#v();let t=this.#n.fetch(this.options,e);return e?.throwOnError||(t=t.catch(rh.noop)),t}#b(){this.#x();let e=(0,rh.resolveStaleTime)(this.options.staleTime,this.#n);if(rh.isServer||this.#i.isStale||!(0,rh.isValidTimeout)(e))return;let t=(0,rh.timeUntilStale)(this.#i.dataUpdatedAt,e);this.#d=setTimeout(()=>{this.#i.isStale||this.updateResult()},t+1)}#w(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#n):this.options.refetchInterval)??!1}#j(e){this.#y(),this.#f=e,!rh.isServer&&!1!==(0,rh.resolveEnabled)(this.options.enabled,this.#n)&&(0,rh.isValidTimeout)(this.#f)&&0!==this.#f&&(this.#h=setInterval(()=>{(this.options.refetchIntervalInBackground||ro.focusManager.isFocused())&&this.#m()},this.#f))}#g(){this.#b(),this.#j(this.#w())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#y(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}createResult(e,t){let r,n=this.#n,s=this.options,i=this.#i,a=this.#a,o=this.#o,l=e!==n?e.state:this.#s,{state:c}=e,u={...c},d=!1;if(t._optimisticResults){let r=this.hasListeners(),i=!r&&rp(e,t),a=r&&rg(e,n,t,s);(i||a)&&(u={...u,...(0,rc.fetchState)(c.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:f,status:p}=u;r=u.data;let m=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===p){let e;i?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(e=i.data,m=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#u?.state.data,this.#u):t.placeholderData,void 0!==e&&(p="success",r=(0,rh.replaceData)(i?.data,e,t),d=!0)}if(t.select&&void 0!==r&&!m)if(i&&r===a?.data&&t.select===this.#l)r=this.#c;else try{this.#l=t.select,r=t.select(r),r=(0,rh.replaceData)(i?.data,r,t),this.#c=r,this.#t=null}catch(e){this.#t=e}this.#t&&(h=this.#t,r=this.#c,f=Date.now(),p="error");let g="fetching"===u.fetchStatus,x="pending"===p,y="error"===p,v=x&&g,b=void 0!==r,w={status:p,fetchStatus:u.fetchStatus,isPending:x,isSuccess:"success"===p,isError:y,isInitialLoading:v,isLoading:v,data:r,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:g,isRefetching:g&&!x,isLoadingError:y&&!b,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:y&&b,isStale:rx(e,t),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},r=()=>{t(this.#r=w.promise=(0,rd.pendingThenable)())},s=this.#r;switch(s.status){case"pending":e.queryHash===n.queryHash&&t(s);break;case"fulfilled":("error"===w.status||w.data!==s.value)&&r();break;case"rejected":("error"!==w.status||w.error!==s.reason)&&r()}}return w}updateResult(){let e=this.#i,t=this.createResult(this.#n,this.options);if(this.#a=this.#n.state,this.#o=this.options,void 0!==this.#a.data&&(this.#u=this.#n),(0,rh.shallowEqualObjects)(t,e))return;this.#i=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#p.size)return!0;let n=new Set(r??this.#p);return this.options.throwOnError&&n.add("error"),Object.keys(this.#i).some(t=>this.#i[t]!==e[t]&&n.has(t))};this.#R({listeners:r()})}#v(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#n)return;let t=this.#n;this.#n=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#R(e){rl.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#n,type:"observerResultsUpdated"})})}};function rp(e,t){return!1!==(0,rh.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&rm(e,t,t.refetchOnMount)}function rm(e,t,r){if(!1!==(0,rh.resolveEnabled)(t.enabled,e)){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&rx(e,t)}return!1}function rg(e,t,r,n){return(e!==t||!1===(0,rh.resolveEnabled)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&rx(e,r)}function rx(e,t){return!1!==(0,rh.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,rh.resolveStaleTime)(t.staleTime,e))}var ry=e.i(68734),rv=i.createContext((n=!1,{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}));function rb(){}var rw=i.createContext(!1);rw.Provider;var rj=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});let rR=(0,e0.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),rS=(0,e0.default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),rk=(0,e0.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var rC=e.i(11872);let rE=()=>{let{user:e}=(0,rC.useAuth)(),t=(0,a.useRouter)(),r=(0,a.useSearchParams)(),n=r?r.get("article"):null,[o,l]=(0,i.useState)("canvas"),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),f=(0,i.useRef)(!1),{data:p,isLoading:m,refetch:g}=function(e,t,r){let n,s=(0,ry.useQueryClient)(r),a=i.useContext(rw),o=i.useContext(rv),l=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=a?"isRestoring":"optimistic",n=l.staleTime,l.suspense&&(l.staleTime="function"==typeof n?(...e)=>Math.max(n(...e),1e3):Math.max(n??1e3,1e3),"number"==typeof l.gcTime&&(l.gcTime=Math.max(l.gcTime,1e3))),(l.suspense||l.throwOnError||l.experimental_prefetchInRender)&&!o.isReset()&&(l.retryOnMount=!1),i.useEffect(()=>{o.clearReset()},[o]);let c=!s.getQueryCache().get(l.queryHash),[u]=i.useState(()=>new t(s,l)),d=u.getOptimisticResult(l),h=!a&&!1!==e.subscribed;if(i.useSyncExternalStore(i.useCallback(e=>{let t=h?u.subscribe(rl.notifyManager.batchCalls(e)):rb;return u.updateResult(),t},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),i.useEffect(()=>{u.setOptions(l)},[l,u]),l?.suspense&&d.isPending)throw rj(l,u,o);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>{var i;return e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&void 0===e.data||(i=[e.error,n],"function"==typeof r?r(...i):!!r))})({result:d,errorResetBoundary:o,throwOnError:l.throwOnError,query:s.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if(s.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!rh.isServer&&d.isLoading&&d.isFetching&&!a){let e=c?rj(l,u,o):s.getQueryCache().get(l.queryHash)?.promise;e?.catch(rb).finally(()=>{u.updateResult()})}return l.notifyOnChangeProps?d:u.trackResult(d)}({queryKey:["articles"],queryFn:async()=>{let{data:e,error:t}=await t3.supabase.from("articles").select(`
          *,
          feeds:feeds!articles_feed_id_fkey (
            is_hidden
          )
        `).order("published_at",{ascending:!1});if(t)throw t;let r=(e||[]).filter(e=>!e.feeds?.is_hidden),n=[,,,,,].fill(0).map((e,t)=>40*(t%2!=0));return{items:r.map((e,t)=>{let r=Math.min(...n),s=n.indexOf(r),i=30*Math.sin(1.5*t),a=n[s]+20*Math.cos(.8*t),o=!!e.image_url,l=120*Math.abs(Math.sin(t));return n[s]+=(o?380:260)+l+60,{id:e.id,title:e.title,author:e.author,source:e.source,readingTime:e.reading_time||"5 min read",excerpt:e.excerpt,content:e.content,imageUrl:e.image_url,publishedAt:e.published_at?new Date(e.published_at).toLocaleDateString():"Recently",url:e.url,x:380*s-950+190+i,y:a}}),dimensions:{width:1900,height:Math.max(...n)}}},staleTime:3e5,refetchOnWindowFocus:!1,retry:1},rf,void 0),x=p?.items||[];(0,i.useEffect)(()=>{(async()=>{if(!e)return;let{data:r}=await t3.supabase.from("profiles").select("onboarding_completed").eq("id",e.id).single();r?.onboarding_completed?h(!0):t.push("/onboarding")})()},[e,t]);let y=(0,i.useMemo)(()=>0!==x.length&&n&&x.find(e=>e.id===n)||null,[x,n]),v=e=>{t.push(`/shelf?article=${e.id}`,{scroll:!1})},b=async(t=!1)=>{if(!c&&e){t&&(f.current=!0),u(!0);try{let{data:r}=await t3.supabase.from("feeds").select("url").eq("user_id",e.id);if(r&&r.length>0){let{data:{session:e}}=await t3.supabase.auth.getSession(),n=e?.access_token,s=r.map(e=>fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({feedUrl:e.url})}));await Promise.all(s),t||(0,ri.showSuccess)("Shelf updated"),g()}}catch(e){t||(0,ri.showError)("Connection lost.")}finally{u(!1)}}};return((0,i.useEffect)(()=>{!d||m||f.current||0!==x.length||b(!0)},[m,d,x.length]),d&&(!m||0!==x.length||c))?(0,s.jsxs)("div",{className:"h-screen w-screen bg-background flex flex-col overflow-hidden",children:[(0,s.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-6 py-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start cursor-pointer group",onClick:()=>t.push("/"),children:[(0,s.jsx)("span",{className:"text-[9px] uppercase tracking-[0.4em] font-sans font-bold text-gray-400 group-hover:text-gray-900 transition-colors",children:"The"}),(0,s.jsx)("h1",{className:"text-xl font-serif font-medium tracking-tight text-gray-900",children:"Open Shelf"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsx)(ra,{onUpdate:g}),(0,s.jsxs)("button",{onClick:()=>b(!1),disabled:c,className:"flex items-center space-x-2 text-[10px] uppercase tracking-[0.2em] text-gray-400 hover:text-gray-900 transition-colors",children:[(0,s.jsx)(rR,{className:c?"animate-spin":"",size:14}),(0,s.jsx)("span",{children:"Sync"})]}),(0,s.jsx)(H,{value:o,onValueChange:e=>l(e),children:(0,s.jsxs)(X,{className:"bg-gray-100/50 rounded-none h-9",children:[(0,s.jsx)(G,{value:"canvas",className:"text-[10px] uppercase tracking-widest px-4",children:"Canvas"}),(0,s.jsx)(G,{value:"feed",className:"text-[10px] uppercase tracking-widest px-4",children:"Feed"})]})}),(0,s.jsx)("button",{onClick:()=>t.push("/profile"),className:"p-2 text-gray-300 hover:text-gray-900 transition-colors",title:"Profile & Stacks",children:(0,s.jsx)(rk,{size:16})})]})]}),(0,s.jsx)("main",{className:"flex-1 mt-[73px] relative overflow-hidden",children:x.length>0?"canvas"===o&&p?(0,s.jsx)(em,{articles:p,onArticleClick:v}):(0,s.jsx)("div",{className:"h-full overflow-y-auto subtle-grid",children:(0,s.jsx)(eg,{articles:x,onArticleClick:v})}):(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-gray-400 font-serif italic text-xl",children:c?"Syncing your sources...":"Your shelf is empty."}),(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto",children:c?"We're fetching the latest articles for you.":"Add an RSS feed via 'Manage Feeds' to start your collection."})]}),!c&&(0,s.jsx)(ra,{onUpdate:g,trigger:(0,s.jsxs)("button",{className:"flex items-center space-x-2 px-8 py-4 border border-gray-100 hover:border-gray-900 transition-all text-[10px] uppercase tracking-[0.3em] font-bold",children:[(0,s.jsx)(rS,{size:16}),(0,s.jsx)("span",{children:"Add First Source"})]})}),c&&(0,s.jsx)(t8.Loader2,{className:"animate-spin text-gray-100",size:24})]})}),(0,s.jsx)(t9,{article:y,onClose:()=>{t.push("/shelf",{scroll:!1})}})]}):(0,s.jsxs)("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-[#fafafa] space-y-4",children:[(0,s.jsx)(t8.Loader2,{className:"animate-spin text-gray-200",size:32}),(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-sans",children:"Opening the shelf..."})]})};function rN(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-[#fafafa]",children:(0,s.jsx)(t8.Loader2,{className:"animate-spin text-gray-200",size:32})}),children:(0,s.jsx)(rE,{})})}e.s(["default",()=>rN],89965)}]);
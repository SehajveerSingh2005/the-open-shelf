module.exports=[87235,a=>{"use strict";let b,c,d;var e=a.i(61485),f=a.i(96894),g=a.i(27230),h=a.i(75038),i=a.i(8402),j=a.i(38068),k=a.i(62765),l=a.i(47398),m=a.i(80960),n=a.i(77243),o=a.i(18458),p=f.createContext(void 0);function q(a){let b=f.useContext(p);return a||b||"ltr"}var r="rovingFocusGroup.onEntryFocus",s={bubbles:!1,cancelable:!0},t="RovingFocusGroup",[u,v,w]=(0,j.createCollection)(t),[x,y]=(0,i.createContextScope)(t,[w]),[z,A]=x(t),B=f.forwardRef((a,b)=>(0,e.jsx)(u.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,e.jsx)(u.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,e.jsx)(C,{...a,ref:b})})}));B.displayName=t;var C=f.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,orientation:d,loop:g=!1,dir:i,currentTabStopId:j,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:p,onEntryFocus:t,preventScrollOnEntryFocus:u=!1,...w}=a,x=f.useRef(null),y=(0,k.useComposedRefs)(b,x),A=q(i),[B=null,C]=(0,o.useControllableState)({prop:j,defaultProp:l,onChange:p}),[D,E]=f.useState(!1),F=(0,n.useCallbackRef)(t),H=v(c),I=f.useRef(!1),[J,K]=f.useState(0);return f.useEffect(()=>{let a=x.current;if(a)return a.addEventListener(r,F),()=>a.removeEventListener(r,F)},[F]),(0,e.jsx)(z,{scope:c,orientation:d,dir:A,loop:g,currentTabStopId:B,onItemFocus:f.useCallback(a=>C(a),[C]),onItemShiftTab:f.useCallback(()=>E(!0),[]),onFocusableItemAdd:f.useCallback(()=>K(a=>a+1),[]),onFocusableItemRemove:f.useCallback(()=>K(a=>a-1),[]),children:(0,e.jsx)(m.Primitive.div,{tabIndex:D||0===J?-1:0,"data-orientation":d,...w,ref:y,style:{outline:"none",...a.style},onMouseDown:(0,h.composeEventHandlers)(a.onMouseDown,()=>{I.current=!0}),onFocus:(0,h.composeEventHandlers)(a.onFocus,a=>{let b=!I.current;if(a.target===a.currentTarget&&b&&!D){let b=new CustomEvent(r,s);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=H().filter(a=>a.focusable);G([a.find(a=>a.active),a.find(a=>a.id===B),...a].filter(Boolean).map(a=>a.ref.current),u)}}I.current=!1}),onBlur:(0,h.composeEventHandlers)(a.onBlur,()=>E(!1))})})}),D="RovingFocusGroupItem",E=f.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,focusable:d=!0,active:g=!1,tabStopId:i,...j}=a,k=(0,l.useId)(),n=i||k,o=A(D,c),p=o.currentTabStopId===n,q=v(c),{onFocusableItemAdd:r,onFocusableItemRemove:s}=o;return f.useEffect(()=>{if(d)return r(),()=>s()},[d,r,s]),(0,e.jsx)(u.ItemSlot,{scope:c,id:n,focusable:d,active:g,children:(0,e.jsx)(m.Primitive.span,{tabIndex:p?0:-1,"data-orientation":o.orientation,...j,ref:b,onMouseDown:(0,h.composeEventHandlers)(a.onMouseDown,a=>{d?o.onItemFocus(n):a.preventDefault()}),onFocus:(0,h.composeEventHandlers)(a.onFocus,()=>o.onItemFocus(n)),onKeyDown:(0,h.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void o.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return F[e]}(a,o.orientation,o.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=q().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=o.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>G(e))}})})})});E.displayName=D;var F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function G(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var H=a.i(45610),I="Tabs",[J,K]=(0,i.createContextScope)(I,[y]),L=y(),[M,N]=J(I),O=f.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,n=q(i),[p,r]=(0,o.useControllableState)({prop:d,onChange:f,defaultProp:g});return(0,e.jsx)(M,{scope:c,baseId:(0,l.useId)(),value:p,onValueChange:r,orientation:h,dir:n,activationMode:j,children:(0,e.jsx)(m.Primitive.div,{dir:n,"data-orientation":h,...k,ref:b})})});O.displayName=I;var P="TabsList",Q=f.forwardRef((a,b)=>{let{__scopeTabs:c,loop:d=!0,...f}=a,g=N(P,c),h=L(c);return(0,e.jsx)(B,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:d,children:(0,e.jsx)(m.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:b})})});Q.displayName=P;var R="TabsTrigger",S=f.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,disabled:f=!1,...g}=a,i=N(R,c),j=L(c),k=V(i.baseId,d),l=W(i.baseId,d),n=d===i.value;return(0,e.jsx)(E,{asChild:!0,...j,focusable:!f,active:n,children:(0,e.jsx)(m.Primitive.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":l,"data-state":n?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:k,...g,ref:b,onMouseDown:(0,h.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():i.onValueChange(d)}),onKeyDown:(0,h.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&i.onValueChange(d)}),onFocus:(0,h.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==i.activationMode;n||f||!a||i.onValueChange(d)})})})});S.displayName=R;var T="TabsContent",U=f.forwardRef((a,b)=>{let{__scopeTabs:c,value:d,forceMount:g,children:h,...i}=a,j=N(T,c),k=V(j.baseId,d),l=W(j.baseId,d),n=d===j.value,o=f.useRef(n);return f.useEffect(()=>{let a=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,e.jsx)(H.Presence,{present:g||n,children:({present:c})=>(0,e.jsx)(m.Primitive.div,{"data-state":n?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:b,style:{...a.style,animationDuration:o.current?"0s":void 0},children:c&&h})})});function V(a,b){return`${a}-trigger-${b}`}function W(a,b){return`${a}-content-${b}`}U.displayName=T;var X=a.i(62034);let Y=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(Q,{ref:c,className:(0,X.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));Y.displayName=Q.displayName;let Z=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(S,{ref:c,className:(0,X.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));Z.displayName=S.displayName,f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(U,{ref:c,className:(0,X.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b})).displayName=U.displayName;var $=a.i(40385),_=a.i(94858),aa=a.i(54476),ab=a.i(18048);function ac(a){let b=(0,ab.useConstant)(()=>(0,_.motionValue)(a)),{isStatic:c}=(0,f.useContext)(aa.MotionConfigContext);if(c){let[,c]=(0,f.useState)(a);(0,f.useEffect)(()=>b.on("change",c),[])}return b}var ad=a.i(32235),ae=a.i(66259),af=a.i(36759);function ag(a){return"number"==typeof a?a:parseFloat(a)}var ah=a.i(19261),ai=a.i(26847);function aj(a,b){let c=ac(b()),d=()=>c.set(b());return d(),(0,ai.useIsomorphicLayoutEffect)(()=>{let b=()=>af.frame.preRender(d,!1,!0),c=a.map(a=>a.on("change",b));return()=>{c.forEach(a=>a()),(0,af.cancelFrame)(d)}}),c}function ak(a,b,c,d){if("function"==typeof a){let b;return _.collectMotionValues.current=[],a(),b=aj(_.collectMotionValues.current,a),_.collectMotionValues.current=void 0,b}let e="function"==typeof b?b:function(...a){let b=!Array.isArray(a[0]),c=b?0:-1,d=a[0+c],e=a[1+c],f=a[2+c],g=a[3+c],h=(0,ah.interpolate)(e,f,g);return b?h(d):h}(b,c,d);return Array.isArray(a)?al(a,e):al([a],([a])=>e(a))}function al(a,b){let c=(0,ab.useConstant)(()=>[]);return aj(a,()=>{c.length=0;let d=a.length;for(let b=0;b<d;b++)c[b]=a[b].get();return b(c)})}function am(a,b={}){let{isStatic:c}=(0,f.useContext)(aa.MotionConfigContext),d=()=>(0,ae.isMotionValue)(a)?a.get():a;if(c)return ak(d);let e=ac(d());return(0,f.useInsertionEffect)(()=>(function(a,b,c){let d,e=a.get(),f=null,g=e,h="string"==typeof e?e.replace(/[\d.-]/g,""):void 0,i=()=>{f&&(f.stop(),f=null)},j=()=>{i(),f=new ad.JSAnimation({keyframes:[ag(a.get()),ag(g)],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...c,onUpdate:d})};if(a.attach((a,b)=>{g=a,d=a=>{var c,d;return b((c=a,(d=h)?c+d:c))},af.frame.postRender(j)},i),(0,ae.isMotionValue)(b)){let c=b.on("change",b=>{var c,d;return a.set((c=b,(d=h)?c+d:c))}),d=a.on("destroy",c);return()=>{c(),d()}}return i})(e,a,b),[e,JSON.stringify(b)]),e}var an=a.i(24093);let ao=({articles:a,onArticleClick:b})=>{let c=(0,f.useRef)(null),[d]=(0,f.useState)(()=>({x:0,y:0,scale:.8})),g=ac(d.x),h=ac(d.y),i=ac(d.scale),j=am(g,{damping:45,stiffness:350,mass:.6}),k=am(h,{damping:45,stiffness:350,mass:.6}),l=am(i,{damping:30,stiffness:300}),[m,n]=(0,f.useState)([]),o=(0,f.useRef)({x:-9999,y:-9999,scale:-1}),p=(0,f.useRef)(!1),q=(0,f.useRef)({x:0,y:0}),r=(0,f.useRef)(0),s=(0,f.useCallback)((b=!1)=>{let d=c.current;if(!d)return;let e=i.get(),f=g.get(),j=h.get(),{width:k,height:l}=a.dimensions;if(0===k||0===l)return;let m=Math.sqrt(Math.pow(f-o.current.x,2)+Math.pow(j-o.current.y,2)),p=Math.abs(e-o.current.scale);if(!b&&m<300&&p<.05)return;o.current={x:f,y:j,scale:e};let q=(-f-d.offsetWidth/2)/e-1200,r=(-f+d.offsetWidth/2)/e+1200,s=(-j-d.offsetHeight/2)/e-1200,t=(-j+d.offsetHeight/2)/e+1200,u=Math.floor(-f/k),v=Math.floor(-j/l),w=[];for(let b=u-2;b<=u+2;b++)for(let c=v-2;c<=v+2;c++){let d=b*k,e=c*l,f=Math.abs((31*b+17*c)%a.items.length);for(let g=0;g<a.items.length;g++){let h=(g+f)%a.items.length,i=a.items[h],j=i.x+d,k=i.y+e;j>=q&&j<=r&&k>=s&&k<=t&&w.push({article:i,offset:{x:d,y:e},key:`${i.id}-${b}-${c}`})}}n(w),localStorage.setItem("open-shelf-camera-v11",JSON.stringify({x:f,y:j,scale:e}))},[a,i,g,h]);return(0,f.useEffect)(()=>{let a=g.on("change",()=>s()),b=h.on("change",()=>s()),c=i.on("change",()=>s());return s(!0),()=>{a(),b(),c()}},[g,h,i,s]),(0,f.useEffect)(()=>{let a=c.current;if(!a)return;let b=b=>{if(b.ctrlKey||b.metaKey){b.preventDefault();let c=a.getBoundingClientRect(),d=i.get(),e=Math.min(Math.max(d*(b.deltaY>0?.94:1.06),.3),1.2);if(e!==d){let a=b.clientX-c.left-c.width/2,f=b.clientY-c.top-c.height/2,j=(a-g.get())/d,k=(f-h.get())/d;g.set(a-j*e),h.set(f-k*e),i.set(e)}}else g.set(g.get()-b.deltaX),h.set(h.get()-b.deltaY)},d=a=>{0===a.button&&(p.current=!0,q.current={x:a.clientX,y:a.clientY},r.current=0)},e=a=>{if(!p.current)return;let b=a.clientX-q.current.x,c=a.clientY-q.current.y;r.current+=Math.sqrt(b*b+c*c),g.set(g.get()+b),h.set(h.get()+c),q.current={x:a.clientX,y:a.clientY}},f=()=>{p.current=!1};return a.addEventListener("wheel",b,{passive:!1}),window.addEventListener("mousedown",d),window.addEventListener("mousemove",e),window.addEventListener("mouseup",f),()=>{a.removeEventListener("wheel",b),window.removeEventListener("mousedown",d),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",f)}},[g,h,i]),(0,e.jsxs)("div",{ref:c,className:"w-full h-full relative overflow-hidden bg-background touch-none cursor-grab active:cursor-grabbing select-none",children:[(0,e.jsx)($.motion.div,{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"linear-gradient(to right, #000 1px, transparent 1px), linear-gradient(to bottom, #000 1px, transparent 1px)",backgroundSize:"40px 40px",backgroundPosition:ak([j,k],([a,b])=>`calc(50% + ${a}px) calc(50% + ${b}px)`)}}),(0,e.jsx)($.motion.div,{style:{x:j,y:k,scale:l},className:"absolute left-1/2 top-1/2 pointer-events-none",children:m.map(({article:a,offset:c,key:d})=>(0,e.jsx)("div",{className:"absolute pointer-events-auto",style:{left:a.x+c.x,top:a.y+c.y,transform:"translateX(-50%)",willChange:"transform"},children:(0,e.jsx)(an.default,{article:a,onClick:a=>r.current<10&&b(a),isCanvas:!0})},d))})]})},ap=({articles:a,onArticleClick:b})=>(0,e.jsx)("div",{className:"w-full max-w-[2000px] mx-auto px-6 py-12",children:(0,e.jsx)("div",{className:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 2xl:columns-5 gap-8 space-y-8",children:a.map(a=>(0,e.jsx)("div",{className:"break-inside-avoid",children:(0,e.jsx)(an.default,{article:a,onClick:b})},a.id))})});var aq=a.i(90936),ar=a.i(92946),as=a.i(75023);function at(a,b){let c,d=()=>{let{currentTime:d}=b,e=(null===d?0:d.value)/100;c!==e&&a(e),c=e};return af.frame.preUpdate(d,!0),()=>(0,af.cancelFrame)(d)}var au=a.i(51184),av=a.i(93891),aw=a.i(47348);let ax=new WeakMap,ay=(a,b,c)=>(d,e)=>e&&e[0]?e[0][a+"Size"]:(0,av.isSVGElement)(d)&&"getBBox"in d?d.getBBox()[b]:d[c],az=ay("inline","width","offsetWidth"),aA=ay("block","height","offsetHeight");function aB({target:a,borderBoxSize:b}){ax.get(a)?.forEach(c=>{c(a,{get width(){return az(a,b)},get height(){return aA(a,b)}})})}function aC(a){a.forEach(aB)}let aD=new Set;var aE=a.i(76365),aF=a.i(69092);let aG=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),aH={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function aI(a,b,c,d){let e=c[b],{length:f,position:g}=aH[b],h=e.current,i=c.time;e.current=a[`scroll${g}`],e.scrollLength=a[`scroll${f}`]-a[`client${f}`],e.offset.length=0,e.offset[0]=0,e.offset[1]=e.scrollLength,e.progress=(0,aE.progress)(0,e.scrollLength,e.current);let j=d-i;e.velocity=j>50?0:(0,aF.velocityPerSecond)(e.current-h,j)}var aJ=a.i(32714),aK=a.i(82824),aL=a.i(71377);let aM={start:0,center:.5,end:1};function aN(a,b,c=0){let d=0;if(a in aM&&(a=aM[a]),"string"==typeof a){let b=parseFloat(a);a.endsWith("px")?d=b:a.endsWith("%")?a=b/100:a.endsWith("vw")?d=b/100*document.documentElement.clientWidth:a.endsWith("vh")?d=b/100*document.documentElement.clientHeight:a=b}return"number"==typeof a&&(d=b*a),c+d}let aO=[0,0],aP=[[0,0],[1,1]],aQ={x:0,y:0},aR=new WeakMap,aS=new WeakMap,aT=new WeakMap,aU=a=>a===document.scrollingElement?window:a;function aV(a,{container:d=document.scrollingElement,...e}={}){if(!d)return as.noop;let f=aT.get(d);f||(f=new Set,aT.set(d,f));let g=function(a,b,c,d={}){return{measure:b=>{!function(a,b=a,c){if(c.x.targetOffset=0,c.y.targetOffset=0,b!==a){let d=b;for(;d&&d!==a;)c.x.targetOffset+=d.offsetLeft,c.y.targetOffset+=d.offsetTop,d=d.offsetParent}c.x.targetLength=b===a?b.scrollWidth:b.clientWidth,c.y.targetLength=b===a?b.scrollHeight:b.clientHeight,c.x.containerLength=a.clientWidth,c.y.containerLength=a.clientHeight}(a,d.target,c),aI(a,"x",c,b),aI(a,"y",c,b),c.time=b,(d.offset||d.target)&&function(a,b,c){let{offset:d=aP}=c,{target:e=a,axis:f="y"}=c,g="y"===f?"height":"width",h=e!==a?function(a,b){let c={x:0,y:0},d=a;for(;d&&d!==b;)if((0,aL.isHTMLElement)(d))c.x+=d.offsetLeft,c.y+=d.offsetTop,d=d.offsetParent;else if("svg"===d.tagName){let a=d.getBoundingClientRect(),b=(d=d.parentElement).getBoundingClientRect();c.x+=a.left-b.left,c.y+=a.top-b.top}else if(d instanceof SVGGraphicsElement){let{x:a,y:b}=d.getBBox();c.x+=a,c.y+=b;let e=null,f=d.parentNode;for(;!e;)"svg"===f.tagName&&(e=f),f=d.parentNode;d=e}else break;return c}(e,a):aQ,i=e===a?{width:a.scrollWidth,height:a.scrollHeight}:"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight},j={width:a.clientWidth,height:a.clientHeight};b[f].offset.length=0;let k=!b[f].interpolate,l=d.length;for(let a=0;a<l;a++){let c=function(a,b,c,d){let e=Array.isArray(a)?a:aO,f=0;return"number"==typeof a?e=[a,a]:"string"==typeof a&&(e=(a=a.trim()).includes(" ")?a.split(" "):[a,aM[a]?a:"0"]),(f=aN(e[0],c,d))-aN(e[1],b)}(d[a],j[g],i[g],h[f]);k||c===b[f].interpolatorOffsets[a]||(k=!0),b[f].offset[a]=c}k&&(b[f].interpolate=(0,ah.interpolate)(b[f].offset,(0,aJ.defaultOffset)(d),{clamp:!1}),b[f].interpolatorOffsets=[...b[f].offset]),b[f].progress=(0,aK.clamp)(0,1,b[f].interpolate(b[f].current))}(a,c,d)},notify:()=>b(c)}}(d,a,{time:0,x:aG(),y:aG()},e);if(f.add(g),!aR.has(d)){let a,e=()=>{for(let a of f)a.measure(af.frameData.timestamp);af.frame.preUpdate(g)},g=()=>{for(let a of f)a.notify()},h=()=>af.frame.read(e);aR.set(d,h);let i=aU(d);window.addEventListener("resize",h,{passive:!0}),d!==document.documentElement&&aS.set(d,"function"==typeof d?(aD.add(d),c||(c=()=>{let a={get width(){return window.innerWidth},get height(){return window.innerHeight}};aD.forEach(b=>b(a))},window.addEventListener("resize",c)),()=>{aD.delete(d),aD.size||"function"!=typeof c||(window.removeEventListener("resize",c),c=void 0)}):(!b&&"u">typeof ResizeObserver&&(b=new ResizeObserver(aC)),(a=(0,aw.resolveElements)(d)).forEach(a=>{let c=ax.get(a);c||(c=new Set,ax.set(a,c)),c.add(h),b?.observe(a)}),()=>{a.forEach(a=>{let c=ax.get(a);c?.delete(h),c?.size||b?.unobserve(a)})})),i.addEventListener("scroll",h,{passive:!0}),h()}let h=aR.get(d);return af.frame.read(h,!1,!0),()=>{(0,af.cancelFrame)(h);let a=aT.get(d);if(!a||(a.delete(g),a.size))return;let b=aR.get(d);aR.delete(d),b&&(aU(d).removeEventListener("scroll",b),aS.get(d)?.(),window.removeEventListener("resize",b))}}let aW=new Map;function aX({source:a,container:b,...c}){var d;let e,f,{axis:g}=c;a&&(b=a);let h=aW.get(b)??new Map;aW.set(b,h);let i=c.target??"self",j=h.get(i)??{},k=g+(c.offset??[]).join(",");return j[k]||(j[k]=!c.target&&(0,au.supportsScrollTimeline)()?new ScrollTimeline({source:b,axis:g}):(d={container:b,...c},e={value:0},f=aV(a=>{e.value=100*a[d.axis].progress},d),{currentTime:e,cancel:f})),j[k]}let aY=()=>({scrollX:(0,_.motionValue)(0),scrollY:(0,_.motionValue)(0),scrollXProgress:(0,_.motionValue)(0),scrollYProgress:(0,_.motionValue)(0)}),aZ=a=>!!a&&!a.current;var a$=a.i(17848),a_=a.i(93594);let a0=(0,a_.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),a1=(0,a_.default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),a2=(0,a_.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),a3=(0,a_.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var a4=a.i(93074),a5=a.i(3169),a6=a.i(41504),a7=a.i(91597),a8=a.i(75409),a9=a.i(53959),ba=a.i(51675),bb=a.i(22967),bc=a.i(95151),bd="Popover",[be,bf]=(0,i.createContextScope)(bd,[a8.createPopperScope]),bg=(0,a8.createPopperScope)(),[bh,bi]=be(bd),bj=a=>{let{__scopePopover:b,children:c,open:d,defaultOpen:g,onOpenChange:h,modal:i=!1}=a,j=bg(b),k=f.useRef(null),[m,n]=f.useState(!1),[p=!1,q]=(0,o.useControllableState)({prop:d,defaultProp:g,onChange:h});return(0,e.jsx)(a8.Root,{...j,children:(0,e.jsx)(bh,{scope:b,contentId:(0,l.useId)(),triggerRef:k,open:p,onOpenChange:q,onOpenToggle:f.useCallback(()=>q(a=>!a),[q]),hasCustomAnchor:m,onCustomAnchorAdd:f.useCallback(()=>n(!0),[]),onCustomAnchorRemove:f.useCallback(()=>n(!1),[]),modal:i,children:c})})};bj.displayName=bd;var bk="PopoverAnchor";f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,g=bi(bk,c),h=bg(c),{onCustomAnchorAdd:i,onCustomAnchorRemove:j}=g;return f.useEffect(()=>(i(),()=>j()),[i,j]),(0,e.jsx)(a8.Anchor,{...h,...d,ref:b})}).displayName=bk;var bl="PopoverTrigger",bm=f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,f=bi(bl,c),g=bg(c),i=(0,k.useComposedRefs)(b,f.triggerRef),j=(0,e.jsx)(m.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":by(f.open),...d,ref:i,onClick:(0,h.composeEventHandlers)(a.onClick,f.onOpenToggle)});return f.hasCustomAnchor?j:(0,e.jsx)(a8.Anchor,{asChild:!0,...g,children:j})});bm.displayName=bl;var bn="PopoverPortal",[bo,bp]=be(bn,{forceMount:void 0}),bq=a=>{let{__scopePopover:b,forceMount:c,children:d,container:f}=a,g=bi(bn,b);return(0,e.jsx)(bo,{scope:b,forceMount:c,children:(0,e.jsx)(H.Presence,{present:c||g.open,children:(0,e.jsx)(a9.Portal,{asChild:!0,container:f,children:d})})})};bq.displayName=bn;var br="PopoverContent",bs=f.forwardRef((a,b)=>{let c=bp(br,a.__scopePopover),{forceMount:d=c.forceMount,...f}=a,g=bi(br,a.__scopePopover);return(0,e.jsx)(H.Presence,{present:d||g.open,children:g.modal?(0,e.jsx)(bu,{...f,ref:b}):(0,e.jsx)(bv,{...f,ref:b})})});bs.displayName=br;var bt=(0,ba.createSlot)("PopoverContent.RemoveScroll"),bu=f.forwardRef((a,b)=>{let c=bi(br,a.__scopePopover),d=f.useRef(null),g=(0,k.useComposedRefs)(b,d),i=f.useRef(!1);return f.useEffect(()=>{let a=d.current;if(a)return(0,bb.hideOthers)(a)},[]),(0,e.jsx)(bc.RemoveScroll,{as:bt,allowPinchZoom:!0,children:(0,e.jsx)(bw,{...a,ref:g,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,h.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),i.current||c.triggerRef.current?.focus()}),onPointerDownOutside:(0,h.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;i.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:(0,h.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),bv=f.forwardRef((a,b)=>{let c=bi(br,a.__scopePopover),d=f.useRef(!1),g=f.useRef(!1);return(0,e.jsx)(bw,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let e=b.target;c.triggerRef.current?.contains(e)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),bw=f.forwardRef((a,b)=>{let{__scopePopover:c,trapFocus:d,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onInteractOutside:l,...m}=a,n=bi(br,c),o=bg(c);return(0,a6.useFocusGuards)(),(0,e.jsx)(a7.FocusScope,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:f,onUnmountAutoFocus:g,children:(0,e.jsx)(a5.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:l,onEscapeKeyDown:i,onPointerDownOutside:j,onFocusOutside:k,onDismiss:()=>n.onOpenChange(!1),children:(0,e.jsx)(a8.Content,{"data-state":by(n.open),role:"dialog",id:n.contentId,...o,...m,ref:b,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bx="PopoverClose";function by(a){return a?"open":"closed"}f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,f=bi(bx,c);return(0,e.jsx)(m.Primitive.button,{type:"button",...d,ref:b,onClick:(0,h.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})}).displayName=bx,f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,f=bg(c);return(0,e.jsx)(a8.Arrow,{...f,...d,ref:b})}).displayName="PopoverArrow";let bz=f.forwardRef(({className:a,align:b="center",sideOffset:c=4,...d},f)=>(0,e.jsx)(bq,{children:(0,e.jsx)(bs,{ref:f,align:b,sideOffset:c,className:(0,X.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})}));function bA(a,[b,c]){return Math.min(c,Math.max(b,a))}bz.displayName=bs.displayName;var bB=a.i(93463),bC=["PageUp","PageDown"],bD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},bF="Slider",[bG,bH,bI]=(0,j.createCollection)(bF),[bJ,bK]=(0,i.createContextScope)(bF,[bI]),[bL,bM]=bJ(bF),bN=f.forwardRef((a,b)=>{let{name:c,min:d=0,max:g=100,step:i=1,orientation:j="horizontal",disabled:k=!1,minStepsBetweenThumbs:l=0,defaultValue:m=[d],value:n,onValueChange:p=()=>{},onValueCommit:q=()=>{},inverted:r=!1,form:s,...t}=a,u=f.useRef(new Set),v=f.useRef(0),w="horizontal"===j,[x=[],y]=(0,o.useControllableState)({prop:n,defaultProp:m,onChange:a=>{let b=[...u.current];b[v.current]?.focus(),p(a)}}),z=f.useRef(x);function A(a,b,{commit:c}={commit:!1}){let e,f=(String(i).split(".")[1]||"").length,h=bA(Math.round((Math.round((a-d)/i)*i+d)*(e=Math.pow(10,f)))/e,[d,g]);y((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,h,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,l*i))return a;{v.current=d.indexOf(h);let b=String(d)!==String(a);return b&&c&&q(d),b?d:a}})}return(0,e.jsx)(bL,{scope:a.__scopeSlider,name:c,disabled:k,min:d,max:g,valueIndexToChangeRef:v,thumbs:u.current,values:x,orientation:j,form:s,children:(0,e.jsx)(bG.Provider,{scope:a.__scopeSlider,children:(0,e.jsx)(bG.Slot,{scope:a.__scopeSlider,children:(0,e.jsx)(w?bQ:bR,{"aria-disabled":k,"data-disabled":k?"":void 0,...t,ref:b,onPointerDown:(0,h.composeEventHandlers)(t.onPointerDown,()=>{k||(z.current=x)}),min:d,max:g,inverted:r,onSlideStart:k?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(x,a);A(a,b)},onSlideMove:k?void 0:function(a){A(a,v.current)},onSlideEnd:k?void 0:function(){let a=z.current[v.current];x[v.current]!==a&&q(x)},onHomeKeyDown:()=>!k&&A(d,0,{commit:!0}),onEndKeyDown:()=>!k&&A(g,x.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!k){let c=bC.includes(a.key)||a.shiftKey&&bD.includes(a.key),d=v.current;A(x[d]+i*(c?10:1)*b,d,{commit:!0})}}})})})})});bN.displayName=bF;var[bO,bP]=bJ(bF,{startEdge:"left",endEdge:"right",size:"width",direction:1}),bQ=f.forwardRef((a,b)=>{let{min:c,max:d,dir:g,inverted:h,onSlideStart:i,onSlideMove:j,onSlideEnd:l,onStepKeyDown:m,...n}=a,[o,p]=f.useState(null),r=(0,k.useComposedRefs)(b,a=>p(a)),s=f.useRef(void 0),t=q(g),u="ltr"===t,v=u&&!h||!u&&h;function w(a){let b=s.current||o.getBoundingClientRect(),e=b0([0,b.width],v?[c,d]:[d,c]);return s.current=b,e(a-b.left)}return(0,e.jsx)(bO,{scope:a.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:(0,e.jsx)(bS,{dir:t,"data-orientation":"horizontal",...n,ref:r,style:{...n.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=w(a.clientX);i?.(b)},onSlideMove:a=>{let b=w(a.clientX);j?.(b)},onSlideEnd:()=>{s.current=void 0,l?.()},onStepKeyDown:a=>{let b=bE[v?"from-left":"from-right"].includes(a.key);m?.({event:a,direction:b?-1:1})}})})}),bR=f.forwardRef((a,b)=>{let{min:c,max:d,inverted:g,onSlideStart:h,onSlideMove:i,onSlideEnd:j,onStepKeyDown:l,...m}=a,n=f.useRef(null),o=(0,k.useComposedRefs)(b,n),p=f.useRef(void 0),q=!g;function r(a){let b=p.current||n.current.getBoundingClientRect(),e=b0([0,b.height],q?[d,c]:[c,d]);return p.current=b,e(a-b.top)}return(0,e.jsx)(bO,{scope:a.__scopeSlider,startEdge:q?"bottom":"top",endEdge:q?"top":"bottom",size:"height",direction:q?1:-1,children:(0,e.jsx)(bS,{"data-orientation":"vertical",...m,ref:o,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=r(a.clientY);h?.(b)},onSlideMove:a=>{let b=r(a.clientY);i?.(b)},onSlideEnd:()=>{p.current=void 0,j?.()},onStepKeyDown:a=>{let b=bE[q?"from-bottom":"from-top"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),bS=f.forwardRef((a,b)=>{let{__scopeSlider:c,onSlideStart:d,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:i,onEndKeyDown:j,onStepKeyDown:k,...l}=a,n=bM(bF,c);return(0,e.jsx)(m.Primitive.span,{...l,ref:b,onKeyDown:(0,h.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(i(a),a.preventDefault()):"End"===a.key?(j(a),a.preventDefault()):bC.concat(bD).includes(a.key)&&(k(a),a.preventDefault())}),onPointerDown:(0,h.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),n.thumbs.has(b)?b.focus():d(a)}),onPointerMove:(0,h.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,h.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),bT="SliderTrack",bU=f.forwardRef((a,b)=>{let{__scopeSlider:c,...d}=a,f=bM(bT,c);return(0,e.jsx)(m.Primitive.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...d,ref:b})});bU.displayName=bT;var bV="SliderRange",bW=f.forwardRef((a,b)=>{let{__scopeSlider:c,...d}=a,g=bM(bV,c),h=bP(bV,c),i=f.useRef(null),j=(0,k.useComposedRefs)(b,i),l=g.values.length,n=g.values.map(a=>b_(a,g.min,g.max)),o=l>1?Math.min(...n):0,p=100-Math.max(...n);return(0,e.jsx)(m.Primitive.span,{"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,...d,ref:j,style:{...a.style,[h.startEdge]:o+"%",[h.endEdge]:p+"%"}})});bW.displayName=bV;var bX="SliderThumb",bY=f.forwardRef((a,b)=>{let c=bH(a.__scopeSlider),[d,g]=f.useState(null),h=(0,k.useComposedRefs)(b,a=>g(a)),i=f.useMemo(()=>d?c().findIndex(a=>a.ref.current===d):-1,[c,d]);return(0,e.jsx)(bZ,{...a,ref:h,index:i})}),bZ=f.forwardRef((a,b)=>{var c,d,g,i,j;let l,n,{__scopeSlider:o,index:p,name:q,...r}=a,s=bM(bX,o),t=bP(bX,o),[u,v]=f.useState(null),w=(0,k.useComposedRefs)(b,a=>v(a)),x=!u||s.form||!!u.closest("form"),y=(0,bB.useSize)(u),z=s.values[p],A=void 0===z?0:b_(z,s.min,s.max),B=(c=p,(d=s.values.length)>2?`Value ${c+1} of ${d}`:2===d?["Minimum","Maximum"][c]:void 0),C=y?.[t.size],D=C?(g=C,i=A,j=t.direction,n=b0([0,50],[0,l=g/2]),(l-n(i)*j)*j):0;return f.useEffect(()=>{if(u)return s.thumbs.add(u),()=>{s.thumbs.delete(u)}},[u,s.thumbs]),(0,e.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[t.startEdge]:`calc(${A}% + ${D}px)`},children:[(0,e.jsx)(bG.ItemSlot,{scope:a.__scopeSlider,children:(0,e.jsx)(m.Primitive.span,{role:"slider","aria-label":a["aria-label"]||B,"aria-valuemin":s.min,"aria-valuenow":z,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...r,ref:w,style:void 0===z?{display:"none"}:a.style,onFocus:(0,h.composeEventHandlers)(a.onFocus,()=>{s.valueIndexToChangeRef.current=p})})}),x&&(0,e.jsx)(b$,{name:q??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:z},p)]})});bY.displayName=bX;var b$=a=>{let b,{value:c,...d}=a,g=f.useRef(null),h=(b=f.useRef({value:c,previous:c}),f.useMemo(()=>(b.current.value!==c&&(b.current.previous=b.current.value,b.current.value=c),b.current.previous),[c]));return f.useEffect(()=>{let a=g.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(h!==c&&b){let d=new Event("input",{bubbles:!0});b.call(a,c),a.dispatchEvent(d)}},[h,c]),(0,e.jsx)("input",{style:{display:"none"},...d,ref:g,defaultValue:c})};function b_(a,b,c){return bA(100/(c-b)*(a-b),[0,100])}function b0(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}let b1=f.forwardRef(({className:a,...b},c)=>(0,e.jsxs)(bN,{ref:c,className:(0,X.cn)("relative flex w-full touch-none select-none items-center",a),...b,children:[(0,e.jsx)(bU,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,e.jsx)(bW,{className:"absolute h-full bg-primary"})}),(0,e.jsx)(bY,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));b1.displayName=bN.displayName;let b2="open-shelf-reader-settings",b3=({article:a,onClose:b})=>{let[c,d]=(0,f.useState)(()=>{try{let a=localStorage.getItem(b2);return a?JSON.parse(a):{fontSize:20,lineHeight:1.75,fontType:"sans",theme:"light"}}catch{return{fontSize:20,lineHeight:1.75,fontType:"sans",theme:"light"}}}),g=(a,b)=>{let e={...c,[a]:b};d(e),localStorage.setItem(b2,JSON.stringify(e))},h=(0,f.useRef)(null),{scrollYProgress:i}=function({container:a,target:b,...c}={}){let d=(0,ab.useConstant)(aY),e=(0,f.useRef)(null),g=(0,f.useRef)(!1),h=(0,f.useCallback)(()=>(e.current=function(a,{axis:b="y",container:c=document.scrollingElement,...d}={}){var e,f;let g;if(!c)return as.noop;let h={axis:b,container:c,...d};return"function"==typeof a?(e=a,f=h,2===e.length?aV(a=>{e(a[f.axis].progress,a)},f):at(e,aX(f))):(g=aX(h),a.attachTimeline({timeline:h.target?void 0:g,observe:a=>(a.pause(),at(b=>{a.time=a.iterationDuration*b},g))}))}((a,{x:b,y:c})=>{d.scrollX.set(b.current),d.scrollXProgress.set(b.progress),d.scrollY.set(c.current),d.scrollYProgress.set(c.progress)},{...c,container:a?.current||void 0,target:b?.current||void 0}),()=>{e.current?.()}),[a,b,JSON.stringify(c.offset)]);return(0,ai.useIsomorphicLayoutEffect)(()=>{if(g.current=!1,!(aZ(a)||aZ(b)))return h();g.current=!0},[h]),(0,f.useEffect)(()=>g.current?((0,ar.invariant)(!aZ(a),"Container ref is defined but not hydrated","use-scroll-ref"),(0,ar.invariant)(!aZ(b),"Target ref is defined but not hydrated","use-scroll-ref"),h()):void 0,[h]),d}({container:h}),j=am(i,{stiffness:100,damping:30,restDelta:.001});return(0,f.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),(0,e.jsxs)($.motion.div,{ref:h,initial:{y:"100vh"},animate:{y:0},exit:{y:"100vh"},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:(0,X.cn)("fixed inset-0 z-50 overflow-y-auto transition-colors duration-500","light"===c.theme?"bg-[#fff] text-gray-900":"bg-[#0a0a0a] text-gray-100"),children:[(0,e.jsxs)("div",{className:(0,X.cn)("fixed top-0 left-0 right-0 h-14 z-50 flex items-center justify-between px-6 transition-all duration-300","light"===c.theme?"bg-white border-b border-gray-50":"bg-[#0a0a0a] border-b border-gray-900"),children:[(0,e.jsx)($.motion.div,{className:"absolute bottom-0 left-0 right-0 h-[1.5px] bg-gray-900 dark:bg-gray-100 origin-left",style:{scaleX:j}}),(0,e.jsxs)("div",{className:"flex items-center space-x-3 overflow-hidden",children:[(0,e.jsx)("span",{className:(0,X.cn)("text-[9px] uppercase tracking-[0.3em] font-sans font-semibold whitespace-nowrap","light"===c.theme?"text-gray-400":"text-gray-600"),children:a.source}),(0,e.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,e.jsx)("p",{className:(0,X.cn)("text-[10px] uppercase tracking-wider truncate font-sans font-medium","light"===c.theme?"text-gray-500":"text-gray-400"),children:a.title})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsxs)(bj,{children:[(0,e.jsx)(bm,{asChild:!0,children:(0,e.jsx)(a4.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-gray-900 dark:hover:text-white",children:(0,e.jsx)(a1,{size:16})})}),(0,e.jsx)(bz,{className:"w-64 p-5 space-y-6 rounded-none border-gray-100",align:"end",children:(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Appearance"}),(0,e.jsxs)("div",{className:"flex border rounded-none p-0.5",children:[(0,e.jsx)("button",{onClick:()=>g("theme","light"),className:(0,X.cn)("p-1.5 transition-colors","light"===c.theme?"bg-gray-100":""),children:(0,e.jsx)(a3,{size:12})}),(0,e.jsx)("button",{onClick:()=>g("theme","dark"),className:(0,X.cn)("p-1.5 transition-colors","dark"===c.theme?"bg-gray-100":""),children:(0,e.jsx)(a2,{size:12})})]})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Typeface"}),(0,e.jsx)("div",{className:"grid grid-cols-3 gap-1",children:["serif","sans","mono"].map(a=>(0,e.jsx)(a4.Button,{variant:c.fontType===a?"secondary":"outline",size:"sm",className:"rounded-none text-[10px] h-7 capitalize",onClick:()=>g("fontType",a),children:a},a))})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Size"}),(0,e.jsxs)("span",{className:"text-[10px] text-gray-500",children:[c.fontSize,"px"]})]}),(0,e.jsx)(b1,{value:[c.fontSize],onValueChange:a=>g("fontSize",a[0]),min:16,max:28,step:1,className:"py-2"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("span",{className:"text-[10px] uppercase tracking-widest font-semibold text-gray-400",children:"Line"}),(0,e.jsx)("span",{className:"text-[10px] text-gray-500",children:c.lineHeight.toFixed(2)})]}),(0,e.jsx)(b1,{value:[c.lineHeight],onValueChange:a=>g("lineHeight",a[0]),min:1.4,max:2.2,step:.05,className:"py-2"})]})]})})]}),(0,e.jsx)(a4.Button,{variant:"ghost",size:"icon",onClick:b,className:"h-8 w-8 text-gray-400 hover:text-gray-900 dark:hover:text-white",children:(0,e.jsx)(a$.X,{size:18})})]})]}),(0,e.jsxs)($.motion.article,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.6,ease:[.16,1,.3,1]},className:"max-w-3xl mx-auto px-6 md:px-10 py-32",children:[(0,e.jsx)("header",{className:"mb-24 space-y-10",children:(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("p",{className:(0,X.cn)("text-[10px] uppercase tracking-[0.5em] font-sans font-bold","light"===c.theme?"text-gray-400":"text-gray-600"),children:[a.source," â€¢ ",a.publishedAt]}),(0,e.jsx)("h1",{className:(0,X.cn)("text-5xl md:text-7xl font-serif font-medium leading-[1.0] tracking-tight","light"===c.theme?"text-gray-900":"text-gray-100"),children:a.title}),(0,e.jsxs)("div",{className:(0,X.cn)("flex items-center space-x-4 text-xl md:text-2xl font-serif italic border-t pt-8","light"===c.theme?"text-gray-400 border-gray-50":"text-gray-500 border-gray-900"),children:[(0,e.jsxs)("span",{children:["by ",a.author]}),(0,e.jsx)("span",{className:"w-1 h-1 rounded-full bg-current opacity-20"}),(0,e.jsx)("span",{children:a.readingTime})]})]})}),(0,e.jsx)("div",{className:(0,X.cn)("prose prose-lg max-w-none transition-all duration-300 selection:bg-gray-100 selection:text-black","serif"===c.fontType?"font-serif":"mono"===c.fontType?"font-mono":"font-sans","light"===c.theme?"prose-gray":"prose-invert prose-gray","[&_img]:mx-auto [&_img]:block [&_img]:rounded-none [&_img]:mt-16 [&_img]:mb-8 [&_img]:max-w-full","[&_button]:hidden [&_a.expand]:hidden [&_div.expand]:hidden [&_.image-expand]:hidden","[&_p]:mb-8 [&_p]:leading-relaxed","[&_h2]:font-serif [&_h2]:text-3xl [&_h2]:mt-16 [&_h2]:mb-8","[&_blockquote]:border-l-[1px] [&_blockquote]:border-gray-200 [&_blockquote]:italic [&_blockquote]:text-2xl [&_blockquote]:font-serif [&_blockquote]:pl-10 [&_blockquote]:my-16","prose-a:underline prose-a:underline-offset-4 prose-a:decoration-gray-200 hover:prose-a:decoration-gray-900 prose-a:text-gray-900 dark:prose-a:text-gray-100 transition-colors"),style:{fontSize:`${c.fontSize}px`,lineHeight:c.lineHeight},dangerouslySetInnerHTML:{__html:a.content}}),(0,e.jsx)("footer",{className:"mt-40 pt-20 border-t border-gray-50 dark:border-gray-900 flex justify-center",children:(0,e.jsx)(a4.Button,{variant:"outline",asChild:!0,className:(0,X.cn)("rounded-none px-10 h-14 text-[10px] uppercase tracking-[0.4em] transition-all","light"===c.theme?"border-gray-200 hover:bg-gray-900 hover:text-white":"border-gray-800 text-gray-500 hover:bg-white hover:text-black"),children:(0,e.jsxs)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3",children:[(0,e.jsx)("span",{children:"Read Original"}),(0,e.jsx)(a0,{size:12})]})})})]})]})},b4=({article:a,onClose:b})=>(0,e.jsx)(aq.AnimatePresence,{mode:"wait",children:a&&(0,e.jsx)(b3,{article:a,onClose:b},a.id)});var b5=a.i(43383),b6=a.i(40141),b7=a.i(47374),b8=a.i(93249),b9=a.i(39924),ca=a.i(30513);let cb=(0,a_.default)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),cc=(0,a_.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cd=(0,a_.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var ce=a.i(61458);let cf=({onUpdate:a,trigger:b})=>{let[c,d]=(0,f.useState)([]),[g,h]=(0,f.useState)(!0),[i,j]=(0,f.useState)(""),[k,l]=(0,f.useState)(!1),m=async(a=!0)=>{a&&h(!0);let{data:b,error:c}=await b5.supabase.from("feeds").select("*").order("created_at",{ascending:!1});!c&&b&&d(b),a&&h(!1)},n=async b=>{if(b.preventDefault(),i){l(!0);try{let{error:b}=await b5.supabase.functions.invoke("fetch-rss",{body:{feedUrl:i}});if(b)throw b;(0,ce.showSuccess)("Source added to shelf"),j(""),await m(!1),a()}catch(a){(0,ce.showError)("Could not connect to feed.")}finally{l(!1)}}},o=async(b,c)=>{d(a=>a.map(a=>a.id===b?{...a,is_hidden:!c}:a));let{error:e}=await b5.supabase.from("feeds").update({is_hidden:!c}).eq("id",b);e?((0,ce.showError)("Could not update visibility."),m(!1)):a()},p=async b=>{let e=[...c];d(a=>a.filter(a=>a.id!==b));let{error:f}=await b5.supabase.from("feeds").delete().eq("id",b);f?((0,ce.showError)("Could not remove source."),d(e)):((0,ce.showSuccess)("Source removed"),a())};return(0,f.useEffect)(()=>{m()},[]),(0,e.jsxs)(b6.Dialog,{children:[(0,e.jsx)(b6.DialogTrigger,{asChild:!0,children:b||(0,e.jsxs)("button",{className:"flex items-center space-x-2 text-[10px] uppercase tracking-[0.2em] text-gray-400 hover:text-gray-900 transition-colors",children:[(0,e.jsx)(cb,{size:14}),(0,e.jsx)("span",{children:"Manage Feeds"})]})}),(0,e.jsxs)(b6.DialogContent,{className:"sm:max-w-md rounded-none border-gray-100",children:[(0,e.jsx)(b6.DialogHeader,{children:(0,e.jsx)(b6.DialogTitle,{className:"font-serif text-3xl font-medium",children:"Your Library"})}),(0,e.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,e.jsxs)("form",{onSubmit:n,className:"flex items-stretch space-x-2",children:[(0,e.jsx)(b7.Input,{placeholder:"https://example.com/feed",value:i,onChange:a=>j(a.target.value),className:"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-11 flex-1 transition-colors"}),(0,e.jsx)(a4.Button,{type:"submit",disabled:k,className:"rounded-none bg-gray-900 hover:bg-black px-6 h-11",children:k?(0,e.jsx)(b8.Loader2,{className:"animate-spin",size:16}):(0,e.jsx)(ca.Plus,{size:16})})]}),(0,e.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-3 pr-2 scrollbar-thin",children:g&&0===c.length?(0,e.jsx)("div",{className:"flex justify-center py-12",children:(0,e.jsx)(b8.Loader2,{className:"animate-spin text-gray-200"})}):0===c.length?(0,e.jsx)("p",{className:"text-center text-sm text-gray-400 font-serif italic py-8",children:"No sources yet."}):c.map(a=>(0,e.jsxs)("div",{className:`flex items-center justify-between p-4 border transition-all duration-300 ${a.is_hidden?"bg-gray-50/50 border-gray-100 opacity-60":"bg-white border-gray-100 hover:border-gray-300"}`,children:[(0,e.jsxs)("div",{className:"overflow-hidden pr-4",children:[(0,e.jsx)("p",{className:`font-serif font-medium truncate text-lg transition-all ${a.is_hidden?"text-gray-400 line-through":"text-gray-900"}`,children:a.title}),(0,e.jsx)("p",{className:"text-[9px] text-gray-400 truncate uppercase tracking-widest",children:a.url})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-1 shrink-0",children:[(0,e.jsx)(a4.Button,{variant:"ghost",size:"icon",onClick:()=>o(a.id,a.is_hidden),className:"text-gray-300 hover:text-gray-900 transition-colors h-9 w-9",children:a.is_hidden?(0,e.jsx)(cd,{size:16}):(0,e.jsx)(cc,{size:16})}),(0,e.jsx)(a4.Button,{variant:"ghost",size:"icon",onClick:()=>p(a.id),className:"text-gray-300 hover:text-red-500 transition-colors h-9 w-9",children:(0,e.jsx)(b9.Trash2,{size:16})})]})]},a.id))})]})]})]})};var cg=a.i(23915),ch=a.i(63958),ci=a.i(58779),cj=a.i(24214),ck=a.i(8709),cl=a.i(11974),cm=class extends cj.Subscribable{constructor(a,b){super(),this.options=b,this.#a=a,this.#b=null,this.#c=(0,ck.pendingThenable)(),this.options.experimental_prefetchInRender||this.#c.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(b)}#a;#d=void 0;#e=void 0;#f=void 0;#g;#h;#c;#b;#i;#j;#k;#l;#m;#n;#o=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#d.addObserver(this),cn(this.#d,this.options)?this.#p():this.updateResult(),this.#q())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return co(this.#d,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return co(this.#d,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#r(),this.#s(),this.#d.removeObserver(this)}setOptions(a){let b=this.options,c=this.#d;if(this.options=this.#a.defaultQueryOptions(a),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,cl.resolveEnabled)(this.options.enabled,this.#d))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#t(),this.#d.setOptions(this.options),b._defaulted&&!(0,cl.shallowEqualObjects)(this.options,b)&&this.#a.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#d,observer:this});let d=this.hasListeners();d&&cp(this.#d,c,this.options,b)&&this.#p(),this.updateResult(),d&&(this.#d!==c||(0,cl.resolveEnabled)(this.options.enabled,this.#d)!==(0,cl.resolveEnabled)(b.enabled,this.#d)||(0,cl.resolveStaleTime)(this.options.staleTime,this.#d)!==(0,cl.resolveStaleTime)(b.staleTime,this.#d))&&this.#u();let e=this.#v();d&&(this.#d!==c||(0,cl.resolveEnabled)(this.options.enabled,this.#d)!==(0,cl.resolveEnabled)(b.enabled,this.#d)||e!==this.#n)&&this.#w(e)}getOptimisticResult(a){var b,c;let d=this.#a.getQueryCache().build(this.#a,a),e=this.createResult(d,a);return b=this,c=e,(0,cl.shallowEqualObjects)(b.getCurrentResult(),c)||(this.#f=e,this.#h=this.options,this.#g=this.#d.state),e}getCurrentResult(){return this.#f}trackResult(a,b){let c={};return Object.keys(a).forEach(d=>{Object.defineProperty(c,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),b?.(d),a[d])})}),c}trackProp(a){this.#o.add(a)}getCurrentQuery(){return this.#d}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){let b=this.#a.defaultQueryOptions(a),c=this.#a.getQueryCache().build(this.#a,b);return c.fetch().then(()=>this.createResult(c,b))}fetch(a){return this.#p({...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#f))}#p(a){this.#t();let b=this.#d.fetch(this.options,a);return a?.throwOnError||(b=b.catch(cl.noop)),b}#u(){this.#r();let a=(0,cl.resolveStaleTime)(this.options.staleTime,this.#d);if(cl.isServer||this.#f.isStale||!(0,cl.isValidTimeout)(a))return;let b=(0,cl.timeUntilStale)(this.#f.dataUpdatedAt,a);this.#l=setTimeout(()=>{this.#f.isStale||this.updateResult()},b+1)}#v(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#d):this.options.refetchInterval)??!1}#w(a){this.#s(),this.#n=a,!cl.isServer&&!1!==(0,cl.resolveEnabled)(this.options.enabled,this.#d)&&(0,cl.isValidTimeout)(this.#n)&&0!==this.#n&&(this.#m=setInterval(()=>{(this.options.refetchIntervalInBackground||cg.focusManager.isFocused())&&this.#p()},this.#n))}#q(){this.#u(),this.#w(this.#v())}#r(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#s(){this.#m&&(clearInterval(this.#m),this.#m=void 0)}createResult(a,b){let c,d=this.#d,e=this.options,f=this.#f,g=this.#g,h=this.#h,i=a!==d?a.state:this.#e,{state:j}=a,k={...j},l=!1;if(b._optimisticResults){let c=this.hasListeners(),f=!c&&cn(a,b),g=c&&cp(a,d,b,e);(f||g)&&(k={...k,...(0,ci.fetchState)(j.data,a.options)}),"isRestoring"===b._optimisticResults&&(k.fetchStatus="idle")}let{error:m,errorUpdatedAt:n,status:o}=k;c=k.data;let p=!1;if(void 0!==b.placeholderData&&void 0===c&&"pending"===o){let a;f?.isPlaceholderData&&b.placeholderData===h?.placeholderData?(a=f.data,p=!0):a="function"==typeof b.placeholderData?b.placeholderData(this.#k?.state.data,this.#k):b.placeholderData,void 0!==a&&(o="success",c=(0,cl.replaceData)(f?.data,a,b),l=!0)}if(b.select&&void 0!==c&&!p)if(f&&c===g?.data&&b.select===this.#i)c=this.#j;else try{this.#i=b.select,c=b.select(c),c=(0,cl.replaceData)(f?.data,c,b),this.#j=c,this.#b=null}catch(a){this.#b=a}this.#b&&(m=this.#b,c=this.#j,n=Date.now(),o="error");let q="fetching"===k.fetchStatus,r="pending"===o,s="error"===o,t=r&&q,u=void 0!==c,v={status:o,fetchStatus:k.fetchStatus,isPending:r,isSuccess:"success"===o,isError:s,isInitialLoading:t,isLoading:t,data:c,dataUpdatedAt:k.dataUpdatedAt,error:m,errorUpdatedAt:n,failureCount:k.fetchFailureCount,failureReason:k.fetchFailureReason,errorUpdateCount:k.errorUpdateCount,isFetched:k.dataUpdateCount>0||k.errorUpdateCount>0,isFetchedAfterMount:k.dataUpdateCount>i.dataUpdateCount||k.errorUpdateCount>i.errorUpdateCount,isFetching:q,isRefetching:q&&!r,isLoadingError:s&&!u,isPaused:"paused"===k.fetchStatus,isPlaceholderData:l,isRefetchError:s&&u,isStale:cq(a,b),refetch:this.refetch,promise:this.#c};if(this.options.experimental_prefetchInRender){let b=a=>{"error"===v.status?a.reject(v.error):void 0!==v.data&&a.resolve(v.data)},c=()=>{b(this.#c=v.promise=(0,ck.pendingThenable)())},e=this.#c;switch(e.status){case"pending":a.queryHash===d.queryHash&&b(e);break;case"fulfilled":("error"===v.status||v.data!==e.value)&&c();break;case"rejected":("error"!==v.status||v.error!==e.reason)&&c()}}return v}updateResult(){let a=this.#f,b=this.createResult(this.#d,this.options);if(this.#g=this.#d.state,this.#h=this.options,void 0!==this.#g.data&&(this.#k=this.#d),(0,cl.shallowEqualObjects)(b,a))return;this.#f=b;let c=()=>{if(!a)return!0;let{notifyOnChangeProps:b}=this.options,c="function"==typeof b?b():b;if("all"===c||!c&&!this.#o.size)return!0;let d=new Set(c??this.#o);return this.options.throwOnError&&d.add("error"),Object.keys(this.#f).some(b=>this.#f[b]!==a[b]&&d.has(b))};this.#x({listeners:c()})}#t(){let a=this.#a.getQueryCache().build(this.#a,this.options);if(a===this.#d)return;let b=this.#d;this.#d=a,this.#e=a.state,this.hasListeners()&&(b?.removeObserver(this),a.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#q()}#x(a){ch.notifyManager.batch(()=>{a.listeners&&this.listeners.forEach(a=>{a(this.#f)}),this.#a.getQueryCache().notify({query:this.#d,type:"observerResultsUpdated"})})}};function cn(a,b){return!1!==(0,cl.resolveEnabled)(b.enabled,a)&&void 0===a.state.data&&("error"!==a.state.status||!1!==b.retryOnMount)||void 0!==a.state.data&&co(a,b,b.refetchOnMount)}function co(a,b,c){if(!1!==(0,cl.resolveEnabled)(b.enabled,a)){let d="function"==typeof c?c(a):c;return"always"===d||!1!==d&&cq(a,b)}return!1}function cp(a,b,c,d){return(a!==b||!1===(0,cl.resolveEnabled)(d.enabled,a))&&(!c.suspense||"error"!==a.state.status)&&cq(a,c)}function cq(a,b){return!1!==(0,cl.resolveEnabled)(b.enabled,a)&&a.isStaleByTime((0,cl.resolveStaleTime)(b.staleTime,a))}var cr=a.i(96789),cs=f.createContext((d=!1,{clearReset:()=>{d=!1},reset:()=>{d=!0},isReset:()=>d}));function ct(){}var cu=f.createContext(!1);cu.Provider;var cv=(a,b,c)=>b.fetchOptimistic(a).catch(()=>{c.clearReset()});let cw=(0,a_.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),cx=(0,a_.default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),cy=(0,a_.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var cz=a.i(23211);let cA=()=>{let{user:a}=(0,cz.useAuth)(),b=(0,g.useRouter)(),c=(0,g.useSearchParams)(),d=c?c.get("article"):null,[h,i]=(0,f.useState)("canvas"),[j,k]=(0,f.useState)(!1),[l,m]=(0,f.useState)(!1),n=(0,f.useRef)(!1),{data:o,isLoading:p,refetch:q}=function(a,b,c){let d,e=(0,cr.useQueryClient)(c),g=f.useContext(cu),h=f.useContext(cs),i=e.defaultQueryOptions(a);e.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=g?"isRestoring":"optimistic",d=i.staleTime,i.suspense&&(i.staleTime="function"==typeof d?(...a)=>Math.max(d(...a),1e3):Math.max(d??1e3,1e3),"number"==typeof i.gcTime&&(i.gcTime=Math.max(i.gcTime,1e3))),(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&!h.isReset()&&(i.retryOnMount=!1),f.useEffect(()=>{h.clearReset()},[h]);let j=!e.getQueryCache().get(i.queryHash),[k]=f.useState(()=>new b(e,i)),l=k.getOptimisticResult(i),m=!g&&!1!==a.subscribed;if(f.useSyncExternalStore(f.useCallback(a=>{let b=m?k.subscribe(ch.notifyManager.batchCalls(a)):ct;return k.updateResult(),b},[k,m]),()=>k.getCurrentResult(),()=>k.getCurrentResult()),f.useEffect(()=>{k.setOptions(i)},[i,k]),i?.suspense&&l.isPending)throw cv(i,k,h);if((({result:a,errorResetBoundary:b,throwOnError:c,query:d,suspense:e})=>{var f;return a.isError&&!b.isReset()&&!a.isFetching&&d&&(e&&void 0===a.data||(f=[a.error,d],"function"==typeof c?c(...f):!!c))})({result:l,errorResetBoundary:h,throwOnError:i.throwOnError,query:e.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw l.error;if(e.getDefaultOptions().queries?._experimental_afterQuery?.(i,l),i.experimental_prefetchInRender&&!cl.isServer&&l.isLoading&&l.isFetching&&!g){let a=j?cv(i,k,h):e.getQueryCache().get(i.queryHash)?.promise;a?.catch(ct).finally(()=>{k.updateResult()})}return i.notifyOnChangeProps?l:k.trackResult(l)}({queryKey:["articles"],queryFn:async()=>{let{data:a,error:b}=await b5.supabase.from("articles").select(`
          *,
          feeds:feeds!articles_feed_id_fkey (
            is_hidden
          )
        `).order("published_at",{ascending:!1});if(b)throw b;let c=(a||[]).filter(a=>!a.feeds?.is_hidden),d=[,,,,,].fill(0).map((a,b)=>40*(b%2!=0));return{items:c.map((a,b)=>{let c=Math.min(...d),e=d.indexOf(c),f=30*Math.sin(1.5*b),g=d[e]+20*Math.cos(.8*b),h=!!a.image_url,i=120*Math.abs(Math.sin(b));return d[e]+=(h?380:260)+i+60,{id:a.id,title:a.title,author:a.author,source:a.source,readingTime:a.reading_time||"5 min read",excerpt:a.excerpt,content:a.content,imageUrl:a.image_url,publishedAt:a.published_at?new Date(a.published_at).toLocaleDateString():"Recently",url:a.url,x:380*e-950+190+f,y:g}}),dimensions:{width:1900,height:Math.max(...d)}}},staleTime:3e5,refetchOnWindowFocus:!1,retry:1},cm,void 0),r=o?.items||[];(0,f.useEffect)(()=>{(async()=>{if(!a)return;let{data:c}=await b5.supabase.from("profiles").select("onboarding_completed").eq("id",a.id).single();c?.onboarding_completed?m(!0):b.push("/onboarding")})()},[a,b]);let s=(0,f.useMemo)(()=>0!==r.length&&d&&r.find(a=>a.id===d)||null,[r,d]),t=a=>{b.push(`/shelf?article=${a.id}`,{scroll:!1})},u=async(b=!1)=>{if(!j&&a){b&&(n.current=!0),k(!0);try{let{data:c}=await b5.supabase.from("feeds").select("url").eq("user_id",a.id);if(c&&c.length>0){let{data:{session:a}}=await b5.supabase.auth.getSession(),d=a?.access_token,e=c.map(a=>fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({feedUrl:a.url})}));await Promise.all(e),b||(0,ce.showSuccess)("Shelf updated"),q()}}catch(a){b||(0,ce.showError)("Connection lost.")}finally{k(!1)}}};return((0,f.useEffect)(()=>{!l||p||n.current||0!==r.length||u(!0)},[p,l,r.length]),l&&(!p||0!==r.length||j))?(0,e.jsxs)("div",{className:"h-screen w-screen bg-background flex flex-col overflow-hidden",children:[(0,e.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-6 py-4 flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"flex flex-col items-start cursor-pointer group",onClick:()=>b.push("/"),children:[(0,e.jsx)("span",{className:"text-[9px] uppercase tracking-[0.4em] font-sans font-bold text-gray-400 group-hover:text-gray-900 transition-colors",children:"The"}),(0,e.jsx)("h1",{className:"text-xl font-serif font-medium tracking-tight text-gray-900",children:"Open Shelf"})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,e.jsx)(cf,{onUpdate:q}),(0,e.jsxs)("button",{onClick:()=>u(!1),disabled:j,className:"flex items-center space-x-2 text-[10px] uppercase tracking-[0.2em] text-gray-400 hover:text-gray-900 transition-colors",children:[(0,e.jsx)(cw,{className:j?"animate-spin":"",size:14}),(0,e.jsx)("span",{children:"Sync"})]}),(0,e.jsx)(O,{value:h,onValueChange:a=>i(a),children:(0,e.jsxs)(Y,{className:"bg-gray-100/50 rounded-none h-9",children:[(0,e.jsx)(Z,{value:"canvas",className:"text-[10px] uppercase tracking-widest px-4",children:"Canvas"}),(0,e.jsx)(Z,{value:"feed",className:"text-[10px] uppercase tracking-widest px-4",children:"Feed"})]})}),(0,e.jsx)("button",{onClick:()=>b.push("/profile"),className:"p-2 text-gray-300 hover:text-gray-900 transition-colors",title:"Profile & Stacks",children:(0,e.jsx)(cy,{size:16})})]})]}),(0,e.jsx)("main",{className:"flex-1 mt-[73px] relative overflow-hidden",children:r.length>0?"canvas"===h&&o?(0,e.jsx)(ao,{articles:o,onArticleClick:t}):(0,e.jsx)("div",{className:"h-full overflow-y-auto subtle-grid",children:(0,e.jsx)(ap,{articles:r,onArticleClick:t})}):(0,e.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("p",{className:"text-gray-400 font-serif italic text-xl",children:j?"Syncing your sources...":"Your shelf is empty."}),(0,e.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto",children:j?"We're fetching the latest articles for you.":"Add an RSS feed via 'Manage Feeds' to start your collection."})]}),!j&&(0,e.jsx)(cf,{onUpdate:q,trigger:(0,e.jsxs)("button",{className:"flex items-center space-x-2 px-8 py-4 border border-gray-100 hover:border-gray-900 transition-all text-[10px] uppercase tracking-[0.3em] font-bold",children:[(0,e.jsx)(cx,{size:16}),(0,e.jsx)("span",{children:"Add First Source"})]})}),j&&(0,e.jsx)(b8.Loader2,{className:"animate-spin text-gray-100",size:24})]})}),(0,e.jsx)(b4,{article:s,onClose:()=>{b.push("/shelf",{scroll:!1})}})]}):(0,e.jsxs)("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-[#fafafa] space-y-4",children:[(0,e.jsx)(b8.Loader2,{className:"animate-spin text-gray-200",size:32}),(0,e.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-sans",children:"Opening the shelf..."})]})};function cB(){return(0,e.jsx)(f.Suspense,{fallback:(0,e.jsx)("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-[#fafafa]",children:(0,e.jsx)(b8.Loader2,{className:"animate-spin text-gray-200",size:32})}),children:(0,e.jsx)(cA,{})})}a.s(["default",()=>cB],87235)}];

//# sourceMappingURL=dyad-apps_the-open-shelf_src_views_Index_tsx_e13e47c1._.js.map
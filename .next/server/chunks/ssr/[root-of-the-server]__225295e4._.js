module.exports=[14249,(a,b,c)=>{"use strict";b.exports=a.r(63028).vendored.contexts.HooksClientContext},82024,(a,b,c)=>{"use strict";b.exports=a.r(63028).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},80355,(a,b,c)=>{"use strict";b.exports=a.r(63028).vendored.contexts.AppRouterContext},64361,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},16040,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},93074,a=>{"use strict";var b=a.i(61485),c=a.i(96894),d=a.i(51675),e=a.i(17170),f=a.i(62034);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h])},47374,30513,61458,a=>{"use strict";var b=a.i(61485),c=a.i(96894),d=a.i(62034);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e],47374);let f=(0,a.i(93594).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>f],30513);var g=a.i(16015);a.s(["showError",0,a=>{g.toast.error(a)},"showSuccess",0,a=>{g.toast.success(a)}],61458)},3950,a=>{"use strict";var b=a.i(61485),c=a.i(96894),d=a.i(27230),e=a.i(43383),f=a.i(23211),g=a.i(93074),h=a.i(47374),i=a.i(40141),j=a.i(30513),k=a.i(93594);let l=(0,k.default)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var m=a.i(39924);let n=(0,k.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var o=a.i(61458),p=a.i(24093);a.s(["default",0,()=>{let{user:a,signOut:k}=(0,f.useAuth)(),q=(0,d.useRouter)(),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(!1),B=async()=>{if(a)try{let{data:b,error:c}=await e.supabase.from("stacks").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(c)throw c;s(b||[]),b&&b.length>0&&y(b[0].id)}catch(a){(0,o.showError)("Could not load your stacks.")}},C=async()=>{if(a&&x)try{let{data:a,error:b}=await e.supabase.from("saved_articles").select(`
          *,
          articles:articles (*)
        `).eq("stack_id",x).order("created_at",{ascending:!1});if(b)throw b;u(a||[])}catch(a){(0,o.showError)("Could not load saved articles.")}};(0,c.useEffect)(()=>{B()},[a]),(0,c.useEffect)(()=>{x&&C()},[x,a]);let D=async b=>{if(b.preventDefault(),v.trim()){A(!0);try{let{data:b,error:c}=await e.supabase.from("stacks").insert({name:v.trim(),user_id:a?.id}).select().single();if(c)throw c;s(a=>[b,...a]),y(b.id),w(""),(0,o.showSuccess)("Stack created")}catch(a){(0,o.showError)("Could not create stack.")}finally{A(!1)}}},E=async a=>{try{let{error:b}=await e.supabase.from("stacks").delete().eq("id",a);if(b)throw b;s(b=>b.filter(b=>b.id!==a)),x===a&&y(r.length>1?r[1].id:null),(0,o.showSuccess)("Stack removed")}catch(a){(0,o.showError)("Could not remove stack.")}},F=a=>{q.push(`/shelf/article/${a.id}`)};return(0,b.jsxs)("div",{className:"h-screen w-screen bg-background flex flex-col overflow-hidden",children:[(0,b.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-100 px-6 py-4 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex flex-col items-start cursor-pointer group",onClick:()=>q.push("/shelf"),children:[(0,b.jsx)("span",{className:"text-[9px] uppercase tracking-[0.4em] font-sans font-bold text-gray-400 group-hover:text-gray-900 transition-colors",children:"The"}),(0,b.jsx)("h1",{className:"text-xl font-serif font-medium tracking-tight text-gray-900",children:"Open Shelf"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-6",children:(0,b.jsx)("button",{onClick:k,className:"p-2 text-gray-300 hover:text-red-500 transition-colors",title:"Sign Out",children:(0,b.jsx)(n,{size:16})})})]}),(0,b.jsxs)("main",{className:"flex-1 mt-[73px] flex overflow-hidden",children:[(0,b.jsxs)("div",{className:"w-80 border-r border-gray-100 flex flex-col overflow-y-auto",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,b.jsx)("h2",{className:"text-lg font-serif font-medium text-gray-900",children:"Your Stacks"}),(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-sans mt-1",children:"Organize your saved articles"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)(i.Dialog,{children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full rounded-none border-gray-100 hover:border-gray-900 h-12 text-[10px] uppercase tracking-[0.3em] font-bold",children:[(0,b.jsx)(j.Plus,{size:14,className:"mr-2"}),"New Stack"]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-md rounded-none border-gray-100",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{className:"font-serif text-2xl font-medium",children:"Create New Stack"})}),(0,b.jsxs)("form",{onSubmit:D,className:"space-y-6 pt-6",children:[(0,b.jsx)(h.Input,{placeholder:"e.g., Philosophy, Technology, Reading List",value:v,onChange:a=>w(a.target.value),className:"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-12"}),(0,b.jsx)(g.Button,{type:"submit",disabled:z,className:"w-full rounded-none bg-gray-900 hover:bg-black h-12 text-[10px] uppercase tracking-[0.3em] font-bold",children:z?"Creating...":"Create Stack"})]})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:r.map(a=>(0,b.jsxs)("div",{className:`flex items-center justify-between p-3 rounded transition-colors ${x===a.id?"bg-gray-50 border border-gray-200":"hover:bg-gray-50"}`,children:[(0,b.jsxs)("button",{onClick:()=>y(a.id),className:"flex-1 text-left overflow-hidden",children:[(0,b.jsx)("p",{className:"font-serif font-medium text-base text-gray-900 truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-[9px] uppercase tracking-widest text-gray-400 truncate",children:[t.filter(b=>b.stack_id===a.id).length," articles"]})]}),(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",onClick:()=>E(a.id),className:"text-gray-300 hover:text-red-500 transition-colors h-8 w-8",children:(0,b.jsx)(m.Trash2,{size:14})})]},a.id))})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto subtle-grid",children:x?(0,b.jsxs)("div",{className:"p-12",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-serif font-medium text-gray-900",children:r.find(a=>a.id===x)?.name}),(0,b.jsxs)("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 font-sans mt-2",children:[t.length," ",1===t.length?"article":"articles"]})]})}),0===t.length?(0,b.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 space-y-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-gray-400 font-serif italic text-xl",children:"This stack is empty."}),(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto",children:"Save articles from the canvas or feed to organize your reading."})]})}):(0,b.jsx)("div",{className:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 2xl:columns-5 gap-8 space-y-8",children:t.map(a=>(0,b.jsx)("div",{className:"break-inside-avoid",children:(0,b.jsx)(p.default,{article:a.articles,onClick:F})},a.id))})]}):(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-gray-400 font-serif italic text-xl",children:"Create your first stack."}),(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-widest text-gray-300 font-sans max-w-xs mx-auto",children:"Stacks help you organize and categorize your saved articles."})]}),(0,b.jsxs)(i.Dialog,{children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{className:"flex items-center space-x-2 px-8 py-4 border border-gray-100 hover:border-gray-900 transition-all text-[10px] uppercase tracking-[0.3em] font-bold",children:[(0,b.jsx)(l,{size:16}),(0,b.jsx)("span",{children:"Create First Stack"})]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-md rounded-none border-gray-100",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{className:"font-serif text-2xl font-medium",children:"Create New Stack"})}),(0,b.jsxs)("form",{onSubmit:D,className:"space-y-6 pt-6",children:[(0,b.jsx)(h.Input,{placeholder:"e.g., Philosophy, Technology, Reading List",value:v,onChange:a=>w(a.target.value),className:"rounded-none border-gray-200 focus-visible:ring-0 focus-visible:ring-offset-0 focus:border-gray-900 h-12"}),(0,b.jsx)(g.Button,{type:"submit",disabled:z,className:"w-full rounded-none bg-gray-900 hover:bg-black h-12 text-[10px] uppercase tracking-[0.3em] font-bold",children:z?"Creating...":"Create Stack"})]})]})]})]})})]})]})}],3950)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__225295e4._.js.map